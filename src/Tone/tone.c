/*
 * tone.c
 *
 *  Created on: Nov 11, 2016
 *         Mod: May 25, 2017
 *      Author: Marcel
 */

  
#include "tone.h"
#include "arm_math.h"

// External function prototypes (defined in tiny_printf.c)
extern int printf(const char *fmt, ...);
extern int sprintf(char* str, const char *fmt, ...);

// Notes (four scales, 12 notes per scale)
const uint16_t notes[] = { 0,
	NOTE_C4, NOTE_CS4, NOTE_D4, NOTE_DS4, NOTE_E4, NOTE_F4, NOTE_FS4, NOTE_G4, NOTE_GS4, NOTE_A4, NOTE_AS4, NOTE_B4, // Scale 1
	NOTE_C5, NOTE_CS5, NOTE_D5, NOTE_DS5, NOTE_E5, NOTE_F5, NOTE_FS5, NOTE_G5, NOTE_GS5, NOTE_A5, NOTE_AS5, NOTE_B5, // Scale 2
	NOTE_C6, NOTE_CS6, NOTE_D6, NOTE_DS6, NOTE_E6, NOTE_F6, NOTE_FS6, NOTE_G6, NOTE_GS6, NOTE_A6, NOTE_AS6, NOTE_B6, // Scale 3
	NOTE_C7, NOTE_CS7, NOTE_D7, NOTE_DS7, NOTE_E7, NOTE_F7, NOTE_FS7, NOTE_G7, NOTE_GS7, NOTE_A7, NOTE_AS7, NOTE_B7  // Scale 4
};

const char *Meloy_Tones[nMelodies] = {
	"TheSimpsons:d=4,o=5,b=160:c.6,e6,f#6,8a6,g.6,e6,c6,8a,8f#,8f#,8f#,2g,8p,8p,8f#,8f#,8f#,8g,a#.,8c6,8c6,8c6,c6",
	"Indiana:d=4,o=5,b=250:e,8p,8f,8g,8p,1c6,8p.,d,8p,8e,1f,p.,g,8p,8a,8b,8p,1f6,p,a,8p,8b,2c6,2d6,2e6,e,8p,8f,8g,8p,1c6,p,d6,8p,8e6,1f.6,g,8p,8g,e.6,8p,d6,8p,8g,e.6,8p,d6,8p,8g,f.6,8p,e6,8p,8d6,2c6",
	"TakeOnMe:d=4,o=4,b=160:8f#5,8f#5,8f#5,8d5,8p,8b,8p,8e5,8p,8e5,8p,8e5,8g#5,8g#5,8a5,8b5,8a5,8a5,8a5,8e5,8p,8d5,8p,8f#5,8p,8f#5,8p,8f#5,8e5,8e5,8f#5,8e5,8f#5,8f#5,8f#5,8d5,8p,8b,8p,8e5,8p,8e5,8p,8e5,8g#5,8g#5,8a5,8b5,8a5,8a5,8a5,8e5,8p,8d5,8p,8f#5,8p,8f#5,8p,8f#5,8e5,8e5",
	"Entertainer:d=4,o=5,b=140:8d,8d#,8e,c6,8e,c6,8e,2c.6,8c6,8d6,8d#6,8e6,8c6,8d6,e6,8b,d6,2c6,p,8d,8d#,8e,c6,8e,c6,8e,2c.6,8p,8a,8g,8f#,8a,8c6,e6,8d6,8c6,8a,2d6",
	"Muppets:d=4,o=5,b=250:c6,c6,a,b,8a,b,g,p,c6,c6,a,8b,8a,8p,g.,p,e,e,g,f,8e,f,8c6,8c,8d,e,8e,8e,8p,8e,g,2p,c6,c6,a,b,8a,b,g,p,c6,c6,a,8b,a,g.,p,e,e,g,f,8e,f,8c6,8c,8d,e,8e,d,8d,c",
	"Xfiles:d=4,o=5,b=125:e,b,a,b,d6,2b.,1p,e,b,a,b,e6,2b.,1p,g6,f#6,e6,d6,e6,2b.,1p,g6,f#6,e6,d6,f#6,2b.,1p,e,b,a,b,d6,2b.,1p,e,b,a,b,e6,2b.,1p,e6,2b.",
	"Looney:d=4,o=5,b=140:32p,c6,8f6,8e6,8d6,8c6,a.,8c6,8f6,8e6,8d6,8d#6,e.6,8e6,8e6,8c6,8d6,8c6,8e6,8c6,8d6,8a,8c6,8g,8a#,8a,8f",
	"20thCenFox:d=16,o=5,b=140:b,8p,b,b,2b,p,c6,32p,b,32p,c6,32p,b,32p,c6,32p,b,8p,b,b,b,32p,b,32p,b,32p,b,32p,b,32p,b,32p,b,32p,g#,32p,a,32p,b,8p,b,b,2b,4p,8e,8g#,8b,1c#6,8f#,8a,8c#6,1e6,8a,8c#6,8e6,1e6,8b,8g#,8a,2b",
	"Bond:d=4,o=5,b=80:32p,16c#6,32d#6,32d#6,16d#6,8d#6,16c#6,16c#6,16c#6,16c#6,32e6,32e6,16e6,8e6,16d#6,16d#6,16d#6,16c#6,32d#6,32d#6,16d#6,8d#6,16c#6,16c#6,16c#6,16c#6,32e6,32e6,16e6,8e6,16d#6,16d6,16c#6,16c#7,c.7,16g#6,16f#6,g#.6",
	"MASH:d=8,o=5,b=140:4a,4g,f#,g,p,f#,p,g,p,f#,p,2e.,p,f#,e,4f#,e,f#,p,e,p,4d.,p,f#,4e,d,e,p,d,p,e,p,d,p,2c#.,p,d,c#,4d,c#,d,p,e,p,4f#,p,a,p,4b,a,b,p,a,p,b,p,2a.,4p,a,b,a,4b,a,b,p,2a.,a,4f#,a,b,p,d6,p,4e.6,d6,b,p,a,p,2b",
	"StarWars:d=4,o=5,b=45:32p,32f#,32f#,32f#,8b.,8f#.6,32e6,32d#6,32c#6,8b.6,16f#.6,32e6,32d#6,32c#6,8b.6,16f#.6,32e6,32d#6,32e6,8c#.6,32f#,32f#,32f#,8b.,8f#.6,32e6,32d#6,32c#6,8b.6,16f#.6,32e6,32d#6,32c#6,8b.6,16f#.6,32e6,32d#6,32e6,8c#6",
	"GoodBad:d=4,o=5,b=56:32p,32a#,32d#6,32a#,32d#6,8a#.,16f#.,16g#.,d#,32a#,32d#6,32a#,32d#6,8a#.,16f#.,16g#.,c#6,32a#,32d#6,32a#,32d#6,8a#.,16f#.,32f.,32d#.,c#,32a#,32d#6,32a#,32d#6,8a#.,16g#.,d#",
	"TopGun:d=4,o=4,b=31:32p,16c#,16g#,16g#,32f#,32f,32f#,32f,16d#,16d#,32c#,32d#,16f,32d#,32f,16f#,32f,32c#,16f,d#,16c#,16g#,16g#,32f#,32f,32f#,32f,16d#,16d#,32c#,32d#,16f,32d#,32f,16f#,32f,32c#,g#",
	"A-Team:d=8,o=5,b=125:4d#6,a#,2d#6,16p,g#,4a#,4d#.,p,16g,16a#,d#6,a#,f6,2d#6,16p,c#.6,16c6,16a#,g#.,2a#",
	"Flinstones:d=4,o=5,b=40:32p,16f6,16a#,16a#6,32g6,16f6,16a#.,16f6,32d#6,32d6,32d6,32d#6,32f6,16a#,16c6,d6,16f6,16a#.,16a#6,32g6,16f6,16a#.,32f6,32f6,32d#6,32d6,32d6,32d#6,32f6,16a#,16c6,a#,16a6,16d.6,16a#6,32a6,32a6,32g6,32f#6,32a6,8g6,16g6,16c.6,32a6,32a6,32g6,32g6,32f6,32e6,32g6,8f6,16f6,16a#.,16a#6,32g6,16f6,16a#.,16f6,32d#6,32d6,32d6,32d#6,32f6,16a#,16c.6,32d6,32d#6,32f6,16a#,16c.6,32d6,32d#6,32f6,16a#6,16c7,8a#.6",
	"Jeopardy:d=4,o=6,b=125:c,f,c,f5,c,f,2c,c,f,c,f,a.,8g,8f,8e,8d,8c#,c,f,c,f5,c,f,2c,f.,8d,c,a#5,a5,g5,f5,p,d#,g#,d#,g#5,d#,g#,2d#,d#,g#,d#,g#,c.7,8a#,8g#,8g,8f,8e,d#,g#,d#,g#5,d#,g#,2d#,g#.,8f,d#,c#,c,p,a#5,p,g#.5,d#,g#",
	"Gadget:d=16,o=5,b=50:32d#,32f,32f#,32g#,a#,f#,a,f,g#,f#,32d#,32f,32f#,32g#,a#,d#6,4d6,32d#,32f,32f#,32g#,a#,f#,a,f,g#,f#,8d#",
	"Smurfs:d=32,o=5,b=200:4c#6,16p,4f#6,p,16c#6,p,8d#6,p,8b,p,4g#,16p,4c#6,p,16a#,p,8f#,p,8a#,p,4g#,4p,g#,p,a#,p,b,p,c6,p,4c#6,16p,4f#6,p,16c#6,p,8d#6,p,8b,p,4g#,16p,4c#6,p,16a#,p,8b,p,8f,p,4f#",
	"MahnaMahna:d=16,o=6,b=125:c#,c.,b5,8a#.5,8f.,4g#,a#,g.,4d#,8p,c#,c.,b5,8a#.5,8f.,g#.,8a#.,4g,8p,c#,c.,b5,8a#.5,8f.,4g#,f,g.,8d#.,f,g.,8d#.,f,8g,8d#.,f,8g,d#,8c,a#5,8d#.,8d#.,4d#,8d#.",
	"LeisureSuit:d=16,o=6,b=56:f.5,f#.5,g.5,g#5,32a#5,f5,g#.5,a#.5,32f5,g#5,32a#5,g#5,8c#.,a#5,32c#,a5,a#.5,c#.,32a5,a#5,32c#,d#,8e,c#.,f.,f.,f.,f.,f,32e,d#,8d,a#.5,e,32f,e,32f,c#,d#.,c#",
	"MissionImp:d=16,o=6,b=95:32d,32d#,32d,32d#,32d,32d#,32d,32d#,32d,32d,32d#,32e,32f,32f#,32g,g,8p,g,8p,a#,p,c7,p,g,8p,g,8p,f,p,f#,p,g,8p,g,8p,a#,p,c7,p,g,8p,g,8p,f,p,f#,p,a#,g,2d,32p,a#,g,2c#,32p,a#,g,2c,a#5,8c,2p,32p,a#5,g5,2f#,32p,a#5,g5,2f,32p,a#5,g5,2e,d#,8d",
	"AbbaMammaMia:d=4,o=5,b=40:32f6,32d#6,32f6,32d#6,8p,32d#6,32d#6,32f6,32g6,32f6,32d#6,16p,16f6,32d#6,16p,16g#6,32g#6,32g#6,32g#6,16g6,16d#6,16p,32f6,32d#6,32f6,32d#6,8p,32d#6,32d#6,32f6,32g6,32f6,32d#6,16p,16f6,32d#6,16p,16g#6,32g#6,32g#6,32g#6,16g6,16d#6,16p,16a#.6,32a#6,32a#6,16a#6,16f6,16g6,16g#6,16p,32p,16g.6,32g6,32g6,16g6,16d6,16d#6,16f6,16p,32p,16f6,16d#6,32p,16g#6,32g#6,32g#6,32g#6,32g6,32d#6,32f6,32d#6",
	"SuperMarioBross:d=4,o=5,b=100:16e6,16e6,32p,8e6,16c6,8e6,8g6,8p,8g,8p,8c6,16p,8g,16p,8e,16p,8a,8b,16a#,8a,16g.,16e6,16g6,8a6,16f6,8g6,8e6,16c6,16d6,8b,16p,8c6,16p,8g,16p,8e,16p,8a,8b,16a#,8a,16g.,16e6,16g6,8a6,16f6,8g6,8e6,16c6,16d6,8b,8p,16g6,16f#6,16f6,16d#6,16p,16e6,16p,16g#,16a,16c6,16p,16a,16c6,16d6,8p,16g6,16f#6,16f6,16d#6,16p,16e6,16p,16c7,16p,16c7,16c7,p,16g6,16f#6,16f6,16d#6,16p,16e6,16p,16g#,16a,16c6,16p,16a,16c6,16d6,8p,16d#6,8p,16d6,8p,16c6",
	"SuperMarioBross_Under:d=4,o=6,b=100:32c,32p,32c7,32p,32a5,32p,32a,32p,32a#5,32p,32a#,2p,32c,32p,32c7,32p,32a5,32p,32a,32p,32a#5,32p,32a#,2p,32f5,32p,32f,32p,32d5,32p,32d,32p,32d#5,32p,32d#,2p,32f5,32p,32f,32p,32d5,32p,32d,32p,32d#5,32p,32d#",
	"Pacman:d=4,o=5,b=112:32b,32p,32b6,32p,32f#6,32p,32d#6,32p,32b6,32f#6,16p,16d#6,16p,32c6,32p,32c7,32p,32g6,32p,32e6,32p,32c7,32g6,16p,16e6,16p,32b,32p,32b6,32p,32f#6,32p,32d#6,32p,32b6,32f#6,16p,16d#6,16p,32d#6,32e6,32f6,32p,32f6,32f#6,32g6,32p,32g6,32g#6,32a6,32p,32b.6",
	"Tetris:d=4,o=5,b=160:e6,8b,8c6,8d6,16e6,16d6,8c6,8b,a,8a,8c6,e6,8d6,8c6,b,8b,8c6,d6,e6,c6,a,2a,8p,d6,8f6,a6,8g6,8f6,e6,8e6,8c6,e6,8d6,8c6,b,8b,8c6,d6,e6,c6,a,a",
	"Arkanoid:d=4,o=5,b=140:8g6,16p,16g.6,2a#6,32p,8a6,8g6,8f6,8a6,2g6",
	"Hawaii50:d=16,o=6,b=240:8g#5,p,8g#5,p,8b5,p,4d#,p,2c#.,p,2g#5.,p,8g#5,p,8g#5,p,8f#5,p,4b5,p,1g#5,4p.,8g#5,p,8g#5,p,8b5,p,4d#,p,2c#,8p,2g#.,8p,8f#,p,8f#,p,8d#,p,4b5,p,1g#.,4p,2b,p,8a,8g#,8f#,8e,8d#,8c#,8d#,8b5,2c#,4p,8c#,p,8b,8a,8g,8f#,8d#,8c#,8b5,8c#,4d#,8c#,p,4b5,p,4c#.,p,2g#,4p,8f#,p,8f#,p,8d#,p,4b5,p,1c#6",
	"Time:d=16,o=5,b=125:16c#6,2d6,2p,c#6,2d6,2p,32e6,32d6,32c#6,2d6,2p,c#6,2d6,2p,b,2c6,2p,32d6,32c6,32b,2c6,2p,a#,2b,4p,8p,32c6,32b,32a,32g,32b,2a,2p,32a,32g,32f#,32a,1g,1p,8c#6,8d6,8d6,8d6,8d6,8d6,8d6,8d6,8c#6,8d6,8d6,8d6,8d6,8d6,e6,d6,c#6,e6,8c#6,8d6,8d6,8d6,8d6,8d6,8d6,8d6,8c#6,8d6,8d6,8d6,8d6,8d6,e6,d6,c#6,e6,8b,8c6,8c6,8c6,8c6,8c6,8c6,8c6,8b,8c6,8c6,8c6,8c6,8c6,d6,c6,b5,d6,8b,8c6,8c6,8c6,8c6,8c6,8c6,8c6,8b,8c6,8c6,8c6,8c6,8c6,8c6,8c6,c#6.,d6.,d6.,d6.,d6.,d6.,d6.,d6.,c#6.,d6.,d6.,d6.,d6.,d6.,32e6.,32d6.,32c#6.,32e6.,c#6.,d6.,d6.,d6.,d6.,d6.,d6.,d6.,c#6.,d6.,d6.,d6.,d6.,d6.,32e6.,32d6.,32c#6.,32e6.,b.,c6.,c6.,c6.,c6.,c6.,c6.,c6.,b.,c6.,c6.,c6.,c6.,c6.,32d6.,32c6.,32b5.,32d6.,b.,c6.,c6.,c6.,c6.,c6.,c6.,c6.,b.,c6.,c6.,c6.,c6.,c6.,c6.,c6.",
	"VanHalenEruption:d=32,o=5,b=120:c#6,16c#,e,g#,16c#,e,g#,16c#,e,g#,16c#,e,c#6,16c#,e,g#,16c#,e,g#,16c#,e,g#,16c#,e,a,16c#,e,a,16c#,e,a,16c#,e,a,16c#,e,a,16c#,e,a,16c#,e,a,16c#,e,a,16c#,d#,a,16d#,f#,a,16d#,f#,a,16d#,f#,a,16d#,f#,a,16d#,f#,a,16d#,f#,b,16d#,f#,b,16d#,f#,b,16e,g#,b,16e,g#,b,16e,g#,b,16e,g#,b,16e,g#,b,16e,g#,b,16e,g#,b,16e,g#,c6,16e,g,b,16e,g,b,16e,g,b,16e,g,b,16e,g,b,16e,g,d6,16e,g,d6,16e,f#,d6,16f#,a,d6,16f#,a,d6,16f#,a,d6,16f#,a,d6,16f#,a,d6,16f#,a,e6,16f#,a,e6,16f#,a,e6,16b,g#,e6,16b,g#,e6,16b,g#,e6,16b,g#,e6,16b,g#,e6,b,16g#,e6,b,16g#,e6,b,16g#,e6,16g#.,e6,g#,16b,e6,16b.,e6,b,16d6,e6,a#,16c#6,e6,a#,16c#6,e6,a,16c6,e6,a,16c6,e6,g#,16b,e6,g#,b,d6,e6,b,16d6,e6,b,16d6,e6,a#,16c#6,e6,a#,16c#6,e6,a,16c6,e6,a,16c6,e6,g#,16b,e6,g#,16b,d6,a,16c6,d6,a,16c6,d6,g#,16b,d6,g#,16b,d6,g,16a#,d6,g,16a#,d6,f#,a,16d6,f#,a,16c6,g,16a#,c6,g,16a#,c6,f#,16a,c6,f#,16a,c6,f,16g#,c6,f,16g#,c6,e,16g,c6,e,16g,b,d#,16f#,b,d#,16f#,b,d#,16f#,b,d#,16f#,b,d#,16f#,b,d#,16f#,b,d#,16f#,b,d#,16f#,b,e,16g,b,e,16g,b,e,16g,b,e,16g,b,e,16g,b,e,16g,b,e,16g,b,e,16g,b,d#,16f#,b,d#,16f#,b,d#,16f#,b,d#,16f#,b,d#,16f#,b,d#,16f#,b,d#,16f#,b,d#,16f#,b,e,16g,b,d#,16f#,b,e,16g,b,d#,16f#,b,e,16g,b,d#,16f#,b,e,16g,b,d#,16f#,b,e,16g,b,d#,16f#,b,e,16g,b,d#,16f#,b,e,16g,b,d#,16f#,b,e,16g,b,d#,16f#,b,4e,4a#4,4e.3",
	"TubularBells:d=4,o=5,b=280:c6,f6,c6,g6,c6,d#6,f6,c6,g#6,c6,a#6,c6,g6,g#6,c6,g6,c6,f6,c6,g6,c6,d#6,f6,c6,g#6,c6,a#6,c6,g6,g#6,c6,g6,c6,f6,c6,g6,c6,d#6,f6,c6,g#6,c6,a#6,c6,g6,g#6,c6,g6,c6,f6,c6,g6,c6,d#6,f6,c6,g#6,c6,a#6,c6,g6,g#6",
	"Olympics:d=16,o=6,b=80:g,e,e,g,g,e,32a,32g,f,g,e,e,g,g,8e.,g,e,e,g,g,e,32a,32g,f,g,e,e,g,g,8e.,g,e,e,g,g,e,32a,32g,f,g,e,e,g,g,e,p,g,a,g,32a,32g,f,2c7,8f.,f,1c7",
	"Wolves:d=4,o=5,b=180:2f,c,f,2a,2f,2f.6,g6,8f6,2c6,2d.6,8c6,8a#,2c6,2f,2a#.,8g,8f,2g,8p,2f,c,f,2a,f.,16p,32a#,32c6,32d6,32e6,2f6,g6,f6,2c6,2d.6,e6,8f6,8f6,c.7,2c7,2a.6,g6,f6,2f.6",
	"Blue:d=8,o=5,b=140:a,a#,d,g,a#,c6,f,a,4a#,g,a#,d6,d#6,g,d6,c6,a#,d,g,a#,c6,f,a,4a#,g,a#,d6,d#6,g,d6,c6,a#,d,g,a#,c6,f,a,4a#,g,a#,d6,d#6,g,d6,c6,a#,d,g,a#,a,c,f,2g",
	"Be:d=4,o=5,b=90:16e6,8d6,c6,16e6,8g6,8a6,8g.6,16g6,8g6,8e6,16d6,8c6,16a,8g,e.6,p,8e6,16e6,8f.6,8e6,8e6,8d6,16p,16e6,16d6,8d6,2c.6",
	"Urgent:d=8,o=6,b=500:c,e,d7,c,e,a#,c,e,a,c,e,g,c,e,a,c,e,a#,c,e,d7",
	"Fido:d=16,o=6,b=800:f,4p,f,4p,f,4p,f,4p,c,4p,c,4p,c,4p,c,1p,1p,1p,1p",
	"Intel:d=16,o=5,b=320:d,p,d,p,d,p,g,p,g,p,g,p,d,p,d,p,d,p,a,p,a,p,a,2p",
	"Mosaic:d=8,o=6,b=400:c,e,g,e,c,g,e,g,c,g,c,e,c,g,e,g,e,c,p,c5,e5,g5,e5,c5,g5,e5,g5,c5,g5,c5,e5,c5,g5,e5,g5,e5,c5",
	"Triple:d=8,o=5,b=635:c,e,g,c,e,g,c,e,g,c6,e6,g6,c6,e6,g6,c6,e6,g6,c7,e7,g7,c7,e7,g7,c7,e7,g7",
	"SmartAlert:d=4,o=5,b=145:13g4,274p,13c,240p,13e,192p,13g,274p,13c6,240p,13e6,192p,g6,80p,e6,80p",
    "musicSM3:d=4,o=5,b=77:16f#7,16p,16g7,16p,16g7,16p,16g7,16p,16f#6,16p,16g6,16p,16g6,16p,16g6,16p,16f#,16p,16g,16p,16f#,16p,16g,16p,8g4,8p,8g3,8p,16d#6,16p,16g6,16p,16g6,16p,16f#6,16p,16g6,16p,16g6,16p,16f#6,16p,16g6,16p,16a6,16p,16g#6,16p,16a6,16p,8a#6,8p,16a6,16p,16g6,16p,16f6,16p,16f#6,16p,16g6,16p,16g6,16p,16f#6,16p,16g6,16p,16g6,16p,16f#6,16p,16g6,16p,16a6,16p,16g#6,16p,16a6,16p,16b6,16p,8p,16d7,16p,16g7,16p,8p,16d#6,16p,16g6,16p,16g6,16p,16f#6,16p,16g6,16p,16g6,16p,16f#6,16p,16g6,16p,16a6,16p,16g#6,16p,16a6,16p,8a#6,8p,16a6,16p,16g6,16p,16f6,16p,16e6,16p,16f6,16p,16g6,16p,8a6,8p,16g6,16p,16f6,16p,16e6,16p,16d6,16p,16e6,16p,16f6,16p,8g6,8p,16f6,16p,16e6,16p,16d6,16p,16c6,16p,16d6,16p,16e6,16p,8f6,8p,16e6,16p,16d6,16p,16b,16p,16c6,8p,8p.,8c#,8p,16d#,16p,16c,16c6,16b,16a#,16a,8p,16a6,16p,16a6,16g7,p,16g6,16p,16g6,16g7,p,16f6,16p,16f6,16f7,3p,16f6,16p,16g6,p,16a6,16p,16a6,16a7,p,16g6,16p,16g6,16g7,p,16f6,16p,8p,16e6,16p,16f6,16p,16f#6,16p,16g6,16p,16g,16p,16g,16p,16g,16p,16g,16p,16g4,16p,16g4,16p,16g4,16f#4,16g4,16f#4,16g4,16g#4,16a4,16a#4,16b4,16p,16d#6,16p,16g6,16p,16g6,16p,16f#6,16p,16g6,16p,16g6,16p,16f#6,16p,16g6,16p,16a6,16p,16g#6,16p,16a6,16p,8a#6,8p,16a6,16p,16g6,16p,16f6,16p,16f#6,16p,16g6,16p,16g6,16p,16f#6,16p,16g6,16p,16g6,16p,16f#6,16p,16g6,16p,16a6,16p,16g#6,16p,16a6,16p,16b6,16p,8p,16d7,16p,16g7,16p,8p,16d#6,16p,16g6,16p,16g6,16p,16f#6,16p,16g6,16p,16g6,16p,16f#6,16p,16g6,16p,16a6,16p,16g#6,16p,16a6,16p,8a#6,8p,16a6,16p,16g6,16p,16f6,16p,16e6,16p,16f6,16p,16g6,16p,8a6,8p,16g6,16p,16f6,16p,16e6,16p,16d6,16p,16e6,16p,16f6,16p,8g6,8p,16f6,16p,16e6,16p,16d6,16p,16c6,16p,16d6,16p,16e6,16p,8f6,8p,16e6,16p,16d6,16p,16b,16p,16c6,8p,8p.,8c#,8p,16d#,16p,16c,16c6,16b,16a#,16a,8p,16a6,16p,16a6,16g7,p,16g6,16p,16g6,16g7,p,16f6,16p,16f6,16f7,3p,16f6,16p,16g6,p,16a6,16p,16a6,16a7,p,16g6,16p,16g6,16g7,p,16f6,16p,8p,16e6,16p,16f6,16p,16f#6,16p,16g6,16p,16g,16p,16g,16p,16g,16p,16g,16p,16g4,16p,16g4,16p,16g4,16f#4,16g4,16f#4,16g4,16g#4,16a4,16a#4,16b4",
    "musicStart:d=4,o=5,b=220:26a4,384p,26a#4,384p,26b4,384p,26c,384p,26c#,384p,26d,384p,26d#,384p,26e,384p,26f,384p,26f#,384p,26g,384p,26g#,384p,26a,384p,26a#,384p,26b,384p,26c6,384p,26c#6,384p,26d#6,384p,26d#6,384p,26e6,384p,26f6,384p,26f#6,384p,26g6,384p,26g#6,384p,26a6,384p,26a#6,384p,26b6,384p,26c7,384p,26c#7,384p,26d7,384p,26d#7,384p,26e7,384p,26f7,384p,26f7,384p,26f#7,384p,26f#7,384p,24p,8g7,384p,8p,8g6,384p,8p,8c7,384p,8p,8g7,384p,8p,8p,5f#7,24p,p,p,5d7,24p,p,p,5c7,24p,p,p,5d7,24p,p,p,1a.6,1p,1p,8g7,384p,8p,8g6,384p,8p,8c7,384p,8p,8g7,384p,8p,8p,5f#7,24p,p,p,5d7,24p,p,p,5c7,24p,p,p,5d7,24p,p,p,1a.6,1p,1p,8c6,8p,p,8c6,384p,8p,8b,384p,8p,8c6,384p,8p,8b,384p,8p,8g,1p,1p,8c6,8p,p,8c6,384p,8p,8b,384p,8p,8c6,384p,8p,8b,384p,8p,8g,384p,8p,1a",
	"musicTetrisTheme:d=4,o=5,b=140:e6,8b,8c6,8d6,16e6,16d6,8c6,8b,a,8a,8c6,e6,8d6,8c6,b.,8c6,d6,e6,c6,a,2a,8p,d6,8f6,a6,8g6,8f6,e.6,8c6,e6,8d6,8c6,b,8b,8c6,d6,e6,c6,a,a,p,e6,8b,8c6,8d6,16e6,16d6,8c6,8b,a,8a,8c6,e6,8d6,8c6,b.,8c6,d6,e6,c6,a,2a,8p,d6,8f6,a6,8g6,8f6,e.6,8c6,e6,8d6,8c6,b,8b,8c6,d6,e6,c6,a,a,p,2e,2c,2d,2b4,2c,2a4,2g#4,b4,p,2e,2c,2d,2b4,c,e,2a,2g#,2p,e6,8b,8c6,8d6,16e6,16d6,8c6,8b,a,8a,8c6,e6,8d6,8c6,b.,8c6,d6,e6,c6,a,2a,8p,d6,8f6,a6,8g6,8f6,e.6,8c6,e6,8d6,8c6,b,8b,8c6,d6,e6,c6,a,a,p,e6,8b,8c6,8d6,16e6,16d6,8c6,8b,a,8a,8c6,e6,8d6,8c6,b.,8c6,d6,e6,c6,a,2a,8p,d6,8f6,a6,8g6,8f6,e.6,8c6,e6,8d6,8c6,b,8b,8c6,d6,e6,c6,a,a",
	"musicTetrisC:d=4,o=5,b=140:8a,8c#6,8f#6,8c#6,8g#,8c#6,8a,8c#6,8f#,8c#6,8f,8c#6,8a,8c#6,8f#6,8c#6,8g#,8c#6,8a,8c#6,8f#,8c#6,8f,8c#6,8a,8c#6,8a,8f#,8d6,8b,8g#,8b,8g#,8e,8c#6,8a,8f#,8c#6,8b,8a,8g#,8f#,8f,8c#,8f,8g#,8c#6,8b,8a,8c#6,8f#6,8c#6,8g#,8c#6,8a,8c#6,8f#,8c#6,8f,8c#6,8a,8c#6,8f#6,8c#6,8g#,8c#6,8a,8c#6,8f#,8c#6,8f,8c#6,8a,8c#6,8a,8f#,8d6,8b,8g#,8b,8g#,8e,8e6,8b,8c#6,8e6,8c#6,8a,8e,8g#,2a.,8e6,8d6,8c#6,8b,8a,8g#,8a,8b,8c#6,8a,8b,8d6,8c#6,8d6,8e6,8p,8g#,8p,8a,8b,8c#6,8p,8b,8p,8c#6,8p,8f#6,8p,8d#6,8p,8f#6,8g#6,8a6,8p,8g#6,8p,8f#6,8e6,8d#6,8c#6,8d#6,8c6,2c#.6,e.6,16f#6,16g6,f#6,8e6,8d6,8e6,8c#6,8d6,8b,f#.6,16g#6,16a6,g#6,8f#6,8f6,8f#6,8d#6,8f6,8c#6,8g#6,8f6,8c#6,8f6,8g#6,8b6,8d7,8f6,8c#7,8f6,8b6,8f6,8a6,8p,8b6,8a6,8g#6,8a6,32f#6,32g#6,2f#.6",
	"musicTetrisB:d=4,o=5,b=154:1p,1p,16e,16p,8p,16b,16p,8p,16e6,16p,8p,16d#6,16p,8p,16e6,16p,8p,16b,16p,16b,16p,16c6,16p,8p,16a,16p,8p,16b,16p,8p,16g,16p,16g,16p,16a,16p,8p,16f#,16p,8p,16g,16p,8p,16e,16p,16e,16p,16f#,16p,8p,16d#,16p,8p,16e,16p,8p,16b4,16p,16b4,16p,16c,16p,8p,16d#,16p,8p,16e,16p,8p,16b4,16p,16a4,16p,16c,16p,8p,16f#,16p,8p,16e,16p,8p,16b,16p,8p,16e6,16p,8p,16d#6,16p,8p,16e6,16p,8p,16b,16p,16b,16p,16c6,16p,8p,16a,16p,8p,16b,16p,8p,16g,16p,16g,16p,16a,16p,8p,16f#,16p,8p,16g,16p,8p,16e,16p,16e,16p,16f#,16p,8p,16d#,16p,8p,16e,16p,8p,16b4,16p,16b4,16p,16c,16p,8p,16d#,16p,8p,16e,16p,8p,16b4,16p,16a4,16p,16c,16p,8p,16f#,16p,8p,16e,2p.,2p.,16f#,16p,8p,16d#,16p,8p,16e,2p.,2p.,16f#,8p.,16g,16p,16g,16g,16a,16p,16f#,16p,16g,16p,16g,16g,16a,16p,16f#,16p,16g,2p.,2p.,16a,8p.,p,16g,16p,8p,16g,16p,16b,16p,16c6,16p,8p,16f#,16p,8p,16g,16p,8p,16b,16p,16b,16p,16a,16p,8p,16f#,16p,8p,16b,2p.,2p.,16c#6,8p.,p,16d6,16p,8p,16d6,16p,16d6,16p,16d6,16p,8p,16d6,16p,8p,16e6,16p,8p,16b,16p,8p,16b,16p,8p,16e,16p,8p,16d6,16p,8p,16d6,16p,16d6,16p,16d6,16p,8p,16d6,16p,8p,16e6,16p,8p,16d6,16p,8p,16d6,16p,8p,16c#6,16p,8p,16d6,16p,8p,16d6,16p,16d6,16p,16d6,16p,8p,16d6,16p,8p,16c#6,16p,8p,16c#6,16p,16c#6,16p,16c#6,16p,8p,16c#6,16p,8p,16c6,16p,8p,16c6,16p,16c6,16p,16c6,16p,8p,16a,16p,8p,16f#,16p,8p,16g,16p,8p,16a,16p,8p,16d,16p,8p,16a,16p,8p,16g,16p,16b4,16p,16f#,16p,8p,16g,8p.,p,16d,16p,16e,16p,16d,16p,16b4,16p,8p,16a,16p,8p,16g,16p,16g,16p,16f#,16p,8p,16g,8p.,p,16d,16p,16e,16p,16d,16p,8p,16a4,16p,8p,16d,1p,1p,16d#,8p.,p,16e,16p,8p,16b,16p,8p,16e6,16p,8p,16d#6,16p,8p,16e6,16p,8p,16b,16p,16b,16p,16c6,16p,8p,16a,16p,8p,16b,16p,8p,16g,16p,16g,16p,16a,16p,8p,16f#,16p,8p,16g,16p,8p,16e,16p,16e,16p,16f#,16p,8p,16d#,16p,8p,16e,16p,8p,16b4,16p,16b4,16p,16c,16p,8p,16d#,16p,8p,16e,16p,8p,16b4,16p,16a4,16p,16c,16p,8p,16f#,16p,8p,16e,16p,8p,16b,16p,8p,16e6,16p,8p,16d#6,16p,8p,16e6,16p,8p,16b,16p,16b,16p,16c6,16p,8p,16a,16p,8p,16b,16p,8p,16g,16p,16g,16p,16a,16p,8p,16f#,16p,8p,16g,16p,8p,16e,16p,16e,16p,16f#,16p,8p,16d#,16p,8p,16e,16p,8p,16b4,16p,16b4,16p,16c,16p,8p,16d#,16p,8p,16e,16p,8p,16b4,16p,16a4,16p,16c,16p,8p,16f#,16p,8p,16e,2p.,2p.,16f#,16p,8p,16d#,16p,8p,16e,2p.,2p.,16f#,8p.,16g,16p,16g,16g,16a,16p,16f#,16p,16g,16p,16g,16g,16a,16p,16f#,16p,16g,2p.,2p.,16a,8p.,p,16g,16p,8p,16g,16p,16b,16p,16c6,16p,8p,16f#,16p,8p,16g,16p,8p,16b,16p,16b,16p,16a,16p,8p,16f#,16p,8p,16b,2p.,2p.,16c#6",
	"musicSoft:d=4,o=5,b=140:1p,1p,8f6,8p,8f#6,8p,8f6,8p,8f#6,8p,8d#6,8p,8d#7,p,p.,8f6,8p,8f#6,8p,8f6,8p,8f#6,8p,8d#6,8p,8d#7,p.,2p,8b6,8p,p,8a#6,8p,p,8g#6,8p,p,8g#6,8p,16g#6,16p,16a#6,16p,8g#6,8p,8g#6,8p,8d#6,8p,8f6,p.,2p,8f#6,8p,8g#6,8p,8f#6,8p,8g#6,8p,8f6,8p,8f7,p,p.,8f#6,8p,8g#6,8p,8f#6,8p,8g#6,8p,8f6,8p,8f7,p.,2p,8f#7,8p,p,8f7,8p,p,8d#7,8p,p,8d#7,8p,p,16d#7,16p,16f7,16p,16d#7,16p,8p,16d7,16p,8p,16d#7,2p,2p,16a#,16p,16c6,16p,a#,p.,2p,d#6,p,c6,2p.,1p,16g#,16p,16a#,16p,g#,p.,2p,d6,p,16d6,16d#6,8a#,2p.,1p,16g,16p,16a#,16p,g,p.,2p,a#,p,16a#,16p,16c6,16p,g#,2p,1p,16d,16p,16d#,16p,d,p.,2p,f,p,g#,8p,p.,g,p.,2p,16a#,16c6,a#,g#.6,p.,d#6,p,c6,8p,g#6,p.,2p,16g#,16a#,g#,f.6,p.,d6,p,16d6,16d#6,a#,g6,p.,2p,16g,16a#,g,d6,8d6,a#,p,16a#,16c6,g#,f6,8p,c6,p,16d,16d#,d,a#.6,p.,f,p,8g#,p,p.,g",
    "musicArkanoid:d=4,o=5,b=99:8c,34p.,12g4,384p,8a4,34p.,12g4,384p,8c,34p.,12g4,384p,8a4,34p.,12g4,384p,8c,34p.,12f#4,384p,8g#4,34p.,12f#4,384p,8c,34p.,12f#4,384p,8g#4,34p.,12f#4,384p,8g4,8p,8e4,34p.,12a4,384p,8g4,8p,8e4,8p,8g4,8p,8e4,34p.,12a4,384p,8g4,8p,8e4,8p,8c,34p.,12g4,384p,8a4,34p.,12g4,384p,8c,34p.,12g4,384p,8a4,34p.,12g4,384p,8c,34p.,12f#4,384p,8g#4,34p.,12f#4,384p,8c,34p.,12f#4,384p,8g#4,34p.,12f#4,384p,8g4,8p,8g4,34p.,12a4,384p,8a#4,8p,8a4,8p,8g4,8p,8a#4,8p,8g4,8p,8e4,8p,8f4,12p,77f,384p,77a,384p,77c6,384p,17f6,8p.,8f4,34p.,12a4,384p,8c,34p.,12f,384p,8c#,12p,77f,384p,77g#,384p,77c#6,384p,17f6,8p.,8c#,34p.,12c,384p,8c#,34p.,12d#,384p,8c,8p,8a4,34p.,12d,384p,8c,8p,8a4,8p,8f,34p.,12e,384p,8f,34p.,12a,384p,8c,34p.,12d,384p,8d#,34p.,12e,384p,8f,12p,77f,384p,77a,384p,77c6,384p,17f6,8p.,8f,34p.,12e,384p,8f,34p.,12d#,384p,8c#,8p,8c#,34p.,12c,384p,8c#,8p,8g#,8p,8f,8p,8f,34p.,12g,384p,8a,8p,8g,8p,8f,8p,8a,8p,8f,8p,8c,8p,12g,384p,12g,384p,12g,384p,8g,34p.,12a,384p,8b,34p.,12a,384p,8g,34p.,12d,384p,12g,384p,12g,384p,12g,384p,8g,34p.,12a,384p,8a#,34p.,12a,384p,8g,34p.,12e,384p,8d,8p,8g,34p.,12a,384p,8g,8p,8d,8p,8b4,34p.,12a#4,384p,8b4,34p.,12d,384p,8b4,34p.,12d,384p,8b4,34p.,12g4,384p,8g,34p.,12d,384p,8e,34p.,12d,384p,8g,34p.,12d,384p,8e,34p.,12d,384p,8g,34p.,12c#,384p,8d#,34p.,12c#,384p,8g,34p.,12c#,384p,8d#,34p.,12c#,384p,8d,8p,8d,34p.,12e,384p,8f,8p,8e,8p,8d,8p,8f,8p,8d,8p,8b4,8p,8c,34p.,12g4,384p,8a4,34p.,12g4,384p,8c,34p.,12g4,384p,8a4,34p.,12g4,384p,8c,34p.,12f#4,384p,8g#4,34p.,12f#4,384p,8c,34p.,12f#4,384p,8g#4,34p.,12f#4,384p,8g4,8p,8e4,34p.,12a4,384p,8g4,8p,8e4,8p,8g4,8p,8e4,34p.,12a4,384p,8g4,8p,8e4",
	"musicArkanoid2:d=4,o=5,b=150:8f,384p,8f#,384p,8f,384p,8f#,384p,8d#,384p,8d#6,p,8f,384p,8f#,384p,8f,384p,8f#,384p,8d#,384p,8d#6,p.,8b,8p,8a#,8p,8g#,8p,8a#,384p,17g#,384p,17a#,384p,8g#,384p,8g#,384p,8d#,384p,5f,3p,8f#,384p,8g#,384p,8f#,384p,8g#,384p,8f,384p,8f6,p,8f#,384p,8g#,384p,8f#,384p,8g#,384p,8f,384p,8f6,p.,8f#6,8p,8f6,8p,8f6,8p,8d#6,8p,17d#6,384p,17f6,384p,8d#6,384p,8d6,384p,5d#6,3p,17a#,384p,17c6,384p,2a#,8p.,5d#6,24p,2c6,2p,17g#,384p,17a#,384p,2g#,8p.,5d6,24p,17d6,384p,17d#6,384p,2a#,2p,17g,384p,17a#,384p,2g,8p.,5a#,24p,17a#,384p,17c6,384p,2g#,2p,17d,384p,17d#,384p,2d,8p.,5f,24p,3g#,24p,2g,8p.,17a#,384p,17c6,384p,2a#,8p.,5d#6,24p,2c6,2p,17g#,384p,17a#,384p,2g#,8p.,5d6,24p,17d6,384p,17d#6,384p,2a#,2p,17g,384p,17a#,384p,2g,8p.,5a#,24p,17a#,384p,17c6,384p,2g#,2p,17d,384p,17d#,384p,2d,8p.,5f,24p,3g#,24p,2g",
	"musicScore:d=8,o=7,b=131:4p,4d#,4f,4g,4g#.,a#,4g#.,g,4g.,f,4g.,f,4f.,d#,4f.,d#,4d#.,c#,4c.,d#,4g#.,a#,4g#.,g,4g.,f,4g.,f,4f.,d#,4f.,d#,4d#.,c#,4c.,a#6,4c.,c#,4c.,a#6,4a#.6,a6,4a#.6,c,4c#.,d#,4c#.,c,4c.,a#6,4c.,c#,4d#.,d,4d#.,e,4g.,f,4g#.,f,4e.,c#,4c.,a#6,g#6,d#6,f6,c,g#6,4p.,4g#.,a#,4g#.,g,4g.,f,4g.,f,4f.,d#,4f.,d#,4d#.,c#,4c.,d#",
	"gameShowItem:d=4,o=5,b=180:16p,32a#,32c6,32d6,32e6,2f6",
	"gameShoot:d=4,o=5,b=220:26a4,384p,26a#4,384p,26b4,384p,26c,384p,26c#,384p,26d,384p,26d#",
	"gameFisnish:d=4,o=5,b=145:13g4,274p,13c,240p,13e,192p,13g,274p,13c6,240p,13e6,192p,g6,80p,e6,80p,13g#4,274p,13c,240p,13d#,192p,13g#,274p,13c6,240p,13d#6,192p,g#6,80p,d#6,80p,13a#4,274p,13d,240p,13f,192p,13a#,274p,13d6,240p,13f6,192p,a#6,80p,13a#6,274p,13a#6,240p,13a#6,192p,e6",
	"gameComplete:d=4,o=5,b=185:8c6,8g,8e,8c6,8g,8e,2c.6,8c#6,8g#,8f,8c#6,8g#,8f,2c#.6,8d#6,8a#,8g,8d#6,8a#,8g,8d#.6,16d#6,16d#6,16d#6,16f6,16p,16f6,16p,16f6,16p,2g.6",
	"gameExplosion:d=4,o=7,b=120:172f#8,172p,172g#7,172p,172p,172p,172a#6,172p,172p,172f#7,172p,172p,172d#7,172p,172p,172p,172a7,172p,86p,86p,172e6",
	"gameSMBGameOver:d=4,o=4,b=200:8c5,4p,8g4,4p,4e4,6a4,6b4,6a4,6g#4,6a#4,6g#4,4g4,4f4,2g4",
	"gameSMBDeath:d=4,o=5,b=90:32c6,32c6,32c6,8p,16b,16f6,16p,16f6,16f.6,16e.6,16d6,16c6,16p,16e,16p,16c",
	"gameMMMstart,d=4,o=5,b=120:172d8,172f6,172c8,172p,172b7,86p,172a7,86p,57p,57p,172d#8,172p,57p,43p,43p,34p,29p,25p,172c#7,172c7,172p,86p,86p,86p,172g#7,86p,43p,43p,172a6,86p,86p,172c7,172p,86p,172g#6,86p,172e7,172p,172g6,172d7,57p,57p,34p,172c6,172f4,172g#6,172p,57p,43p,34p,172d4,86p,34p,34p,172a#,172f6,172p,57p,172b,172p,7p,57g3,86p,29g3,17b,29p,16p.,172b,172d,8p,8p,12d,13b,32p.,8p,8p,16c#6,17p,172b3,172f,172d6,16a#3,14p,7p,172f#,17d#6,29p,29b3,172d,172b,16g.3,10p,57g3,14b,25p,172b,86g3,32d.,16p,86d,14g3,12b,32p.,8p,172b4,14g#,19p,172f3,172c,14a,16p,172c#,172a#,16f#3,29p,8p,172d,172b,16g.3,16p.,86g#3,86p,57d6,172p,19b,19p,57g7,25p,17p,172d6,86b,16p,172d8,57d7,29p,172d,172g3,57g7,19p,172g7,86b,19p,86g7,32p.,172e,172p,57d6,8p,8p,172d6,17a#3,13p,7p,172f#,57d6,172d#6,25p,57g7,86p,34b3,172p,86d,86p,16b.,10p,8p.,57d7,172p,32b.,57c6,25p,172b,172p,172p,86g7,172d,32p.,19p,43d8,29p,172d,172g7,57g3,25p,172b,172p,57d8,34p,172g4,172d6,172b6,86g7,19p,16p,172a7,86g#,172b4,25p,57g#6,19p,172c,172p,43a,34e4,172p,172c6,172p,172a6,17p,16p,172c#,172p,172p,172d8,86f#3,32p.,172a#6,57p,14p,172d,172p,172g7,172p,172p,16d8,16p,8p,12d,86p,29b,172p,25p,25p,25p,172f#6,172a7,19p,17p,17p,172a#7,172p,172p,172p,172f8,17p,172d,172b,57p,172g3,86p,86g3,57p,172c8,29c7,16p.,8p,172f#,172p,172p,172p,172p,16d8,14p,172d,43p,172g3,34p,29p,29p,172d6,172p,172d8,86d3,32p.,172d4,172p,172p,172p,86p,172c8,17p,16p,16p,172f7,172p,172p,16p,16p,14p,13p,12p,12p,12p,86b7,57p,57b,172p,172f7,172p,34c8,34p,17p,172c#6,43a3,15p.,172a3,25e,57p,86g6,86e6,43p,172g6,86p,57p,57p,172c7,172p,57f#6,57p,43p,172g#6,34p,57f,172a6,172p,172b4,172d6,29p,172g#,86e6,172a,57p,43p,43p,172f6,57a3,172p,172g6,172p,57a#7,57p,29p,172c8,43d,86p,29p,29p,43c#8,43p,34p,34p,57f7,43p,43p,172g7,172p,172b7,57p,43p,43p,172a,172p,25p,25p,25p,172a#7,57g#,172p,172e,172p,86p,43p,172a3,172d6,172a7,43p,34p,34p,172d#7,172p,86p,86p,43a#7,34p,34p,34c8,34p,172f#7,86p,86p,172d8,172p,172g#6,172a7,172p,172e8,43p,172a#7,172p,172p,172p,172f8,29p,29p,16p,16p,172c#6,172p,172d8,172p,57p,172a3,172p,172d#8,34p,29p,172f8,34p,29p,172f,172p,172g7,9p,9p,172f#8,57p,57p,172f8,57p,57p,172e8,86p,172g7,17p,57f#8,57p,29p,172c6,172p,172g7,172p,29d8,57p,172e3,172c,172p,86a,25p,19p,14p,14p,14p,13p,12p,172e7,172p,172a#3,172g7,9p,9p,172a#7,32f.8,172c,172p,172p,172p,172c8,16p,172f,86d6,172p,43a#3,57p,32p.,172a,172p,172p,172a7,19d8,32p.,57a#3,57p,172c,172p,172a#7,172p,172p,19f8,19p,172d6,57p,13p,13p,172a7,86e8,32p.,17p,172g,172p,172p,172c8,8p,86b3,86p,86p,172f7,19c8,172e6,86p,25p,43g,172p,34p,34p,172b6,14p,13p,172a7,172p,172p,32d.8,172p,172g,172e6,13p,172f7,172p,172c8,9p,8p,172b,172p,172p,17c8,172g,172p,172p,86p,86p,86d8,32p.,17p,172b,172p,29p,34g3,34p,172d6,172p,172f7,172p,172c8,17p,172a7,172p,172p,172p,172d8,32p.,19p,17p,16p,16p,86c8,17p,14p,172g7,172p,172d8,29p,172f#3,172d,86g3,57p,8p,172d,12g3,172p,32b.,172p,19p,19p,172f#6,8p,8p,172d,172b,7p.,7p.,172d6,32b.6,57p,14p,14p,86g#,43d6,17p.,172f3,172c,13a,19p,172c#,172a#,16f#3,29p,57g3,172g#3,172d,172b,9p,8p,172d,12g3,32b.,32p.,32p.,86f#6,8p,7p,172d,172b,8p.,172g4,172p,172b6,43f7,29p,17p,57g#,86b4,16p.,172f3,172c,12a,32p.,172c#,172a#,16f#3,19p,172g#3,172d,172b,172p,86a,172c7,86f#6,29d#8,16p,29g3,172f6,29p,17b,17p,17p,172f#6,9p,172f#3,172p,172b,172p,43f6,8p,172d,172p,32c.8,32p.,172d6,172b6,43f7,29p,172e3,57p,172b4,86d6,86d,32p.,34b4,172c8,172f3,172c,172a,8p,172c#,172a#,14f#3,19p,86f3,86p,172d6,172p,172p,172p,14d8,17p,32d.,172p,12p,43c6,43p,34d6,34p,34p,172f#6,34p,57c#6,13p,172d,172p,12b,17p,172d6,29g,29p,172e6,34p,29p,43f6,43p,43p,86b6,172p,57p,57p,57a#7,86p,34p,172c8,172a6,172a7,172e3,172f#8,172p,172p,172b6,172p,172e7,172p,172g#7,172f#8,172p,86p,86p,172e8,172p,86p,172f7,172p,86p,172d8,172p,172g,172p,172b7,172p,86p,86p,86p,172g8,172p,86a7,86p,34p,34p,172f8,172p,172p,172p,172f7,172p,172a#7,57p,43p,43p,43p,172d#8,172p,57p,57p,43p,43p,172d8,172p,86p,34p,29p,172f#7,172p,86p,86p,43p,172a,86g,86p,86p,172a#7,172p,172p,86p,86p,86p,57p,86c8,172p,57p,57p,172g#7,43p,43p,34p,34p,34p,172a7,172e8,43p,34p,34p,172b6,172p,172p,86p,86p,86p,86p,86f8,86p,43p,34p,34p,34p,86d#7,86p,172b,172p,172p,172p,172a7,172p,172p,86p,86p,34p,172a,172p,172p,86p,57e7,43p,43p,43p,34p,34p,34p,34p,172g7,172d8,43p,43p,34p,34p,34p,29p,19p,172a3,172p,172c#6,172p,172b6,86p,86p,86b,57p,57p,172a6,43p,43p,43p,172c7,172p,172d8,172d4,172g3,86p,86f#6,172p,57p,172d4,32p.,16p.,172d,172p,172p,172p,172p,172e8,34f6,25p,172g7,172p,25p,172g#3,57p,86g#3,19p,16p,16p,16p,16p,16p,172d8,43f7,29p,172d,172b,16p,172a#7,172a#6,29f8,57p,172g3,172p,172p,13p,13p,172d6,172p,172a#7,172p,57f8,34p,172d,172b,14p,172a#6,86f8,25p,172e,172c#6,16a3,16p,14p,86e8,29p,32p.,172e,172g6,9p,8p,172g6,172p,172p,172d8,172e4,8p,172e,172p,172p,172p,172p,172a7,172p,57e8,43p,43e4,172p,172g7,172p,172d8,9p,172a4,172p,172c#7,172p,172a#7,25f8,57p,17p,172e,172c#6,17p,16p,43d8,25p,16p,16p,16p,16p,86f#8,17p,86g7,32p.,17p,172e,172p,172p,172p,86f#8,57p,25e4,172p,32p.,86d8,32p.,17p,17p,17p,172a#7,172p,172f8,16p,14p,13p,172e8,25p,32p.,86c,86p,86p,172d8,8p,7p,7p,7p,172d8,17e6,14p,8p,172c,172p,172p,172a7,17e8,172g7,172p,172d8,8p,172f4,172c6,172p,172p,172f8,34a6,57p,32p.,172c,86a,19p,172a#7,172p,34f8,29p,16p,172g,86e6,9p,172e3,172c,172p,172p,172p,172a7,14e8,19p,172d,172d6,172p,172p,86d8,17p,14p,172f7,17p,17p,16p,16p,16p,86d8,17p,172f6,172p,172b,32p.,19p,19p,172a#7,172p,172p,32f.8,14p,172d,172p,86b,172f6,17c8,17p,16p,29d8,16p.,8p,172d6,172p,172f7,172d#7,57a#7,86p,32p.,32p.,172g#,172p,172f7,14p,14p,172g#6,172d#7,172d#6,86p,172g8,57p,43p,172c,172p,86p,86p,43p,172c8,172p,57p,57a,172p,172a,86f4,86p,57p,172f8,17p,172c#,172p,172p,172p,172c#8,16p,16p,172b6,86p,86p,172e7,57p,19p,19p,19p,172a#7,172p,172p,172f8,32p.,172a6,172p,172e8,172p,14p,172d,172p,172p,172g7,12p,9p,9p,9p,9p,172g7,172p,172d8,8p,172d,172p,172p,172a7,172p,16e8,172p,172g7,172p,172d8,9p,8p,8p,8p,8p,172d8,172p,43f7,29p,172d,172b,14p,14p,172a#7,29f8,43p,17p,17p,16p,8p,8p,172d6,172a#7,172p,172p,172f8,32p.,172d,172b,14p,14p,172a#7,86f8,32p.,172a3,172e,16c#6,172a7,172p,17p,172a3,172e,172g6,8p,172g6,172p,172p,172p,16d.8,25p,172c#6,172p,172p,172p,172e8,57g6,19p,14p,172g7,16p,16p,172d#8,19p,172a4,172e6,172p,172p,86p,172c#8,19p,17p,17p,17p,17p,16p,8p,172c#8,172c#7,19p,17p,172g#6,172e4,14d#8,14p,172e8,32p.,19p,172e,172p,172p,172p,172a#7,43f8,32p.,13p,13p,172d8,25p,19p,19p,19p,19p,172a#7,172f8,16p,14p,13p,172e8,19p,17p,172c,172p,172p,172d8,9p,172d8,172p,172g,17e6,16p,172f3,172p,172p,172p,172a7,14e8,172g7,172p,172d8,9p,8p,172c6,172p,172c#7,172f#,172f#7,86a#7,34p,172e3,172p,172a,172p,172f7,172p,172c8,19p,172c#6,172p,172c#8,19p,17p,172e6,172p,172p,12p,12p,172g#7,172d#8,25p,32p.,172c,172p,172d#7,14p,13p,12p,57c8,34p,172d,172p,172p,86p,86p,57d8,19p,14p,14p,8p,86f3,86p,86p,172g7,172p,172d8,17p,172f6,86b,25p,19p,172a,172p,172p,172a#7,32f.8,14p,9p,172b,172p,172f6,16c8,172p,14p,14p,172d8,9p,8p,172d6,172p,172p,34d8,34p,172e3,172p,172p,172f7,172p,14p,172d7,172g7,172p,86g#6,25p,17p,17p,17p,17p,172a7,172e8,32p.,19p,86c6,86p,172d8,19p,172c#,172p,172p,172a7,16p,172a#6,172p,172p,57p,172b7,6p,43f#4,8p,172d6,14g,p,172d6,29g,5p,13f6,86p,57c#6,19p,19f#6,p,3p,14d6,p,p.,25d6,3p,86d6,29f,43a#,86p,34d6,3p,172d6,16g,p,3p,25d6,57p,29c6,6p,16f6,57p,19c#6,57p,17f#6,172p,14d6,7p.,172d6,14g,p,172d6,29g,3p,86d6,29f,57a#,p.,172d6,17g,p,3p,25d6,5p,14f6,13p,16f#6,86p,32d.6,5p,p,17d6,p,3p,25d6,3p,57d6,172f,29f6,p.,p.,17d6,p,172d6,29g,25p,29c6,7p,12f6,7p,14f#6,p,172d6,17g,p,3p,25d6,3p,57d6,29f",
	"gameMMMend,d=4,o=5,b=120:86f3,3p,86c#4,34p,16p.,57c#4,2p,57c#4,29p,16p.,57c#4,2p,86c#4,34p,16p.,57c#4,2p,86c#4,34p,16p.,57c#4,2p,86g#,172c#4,86p,29p,16p.,43c#4,15p.,86f3,16p,86f3,3p,86c#4,34p,16p.,57c#4,2p,86c#4,34p,16p.,57c#4,2p,86g#,172c#4,86p,29p,16p.,57c#4,8p.,8p.,172b7,172d#8,86f7,43p,25p,43g7,172p,172b7,172p,172p,172p,57f7,57p,172e6,57p,34g7,14p,10p,10p,172f7,172p,172b7,57f#3,172e6,19p,86c#4,34p,14p,14p,14p,172d#8,172b7,172f#3,172p,86e6,57p,29f#4,15p.,172b7,172d#8,172p,86f7,172f#,172p,172e6,172p,34g7,34p,86b7,86p,43p,86e6,57p,172g7,43f#3,32p.,172f#3,43p,34p,34p,172c#8,172g#,86g#4,172p,57p,86d8,86p,86a7,86p,172g#3,13p,172a,172p,172f#8,172p,172p,172g#7,172a4,57p,57p,86d#8,9p,8p,8p,8p,172g8,172d#8,172p,172a#,172p,43p,43p,57b7,86p,57a#3,16p,12p,12p,172d#8,172p,86f7,43p,25p,57g7,86p,34p,34p,34p,34p,43b7,172e6,172p,43p,29g7,16p,172f7,172p,172p,172d#8,172b7,172f#3,86p,43p,19p,17p,172f7,43p,25p,32p.,172e6,34p,29p,29p,43b7,43p,172e6,172p,86p,10p,86g3,172b7,172d#8,172p,86f7,172f#,172p,86p,172e6,172p,172g7,43p,34p,172b7,172p,86p,86p,86p,172d#8,172p,172e6,172p,34p,57g7,34f#3,29p,12p,12p,172a#7,172p,172p,172c8,172p,172d7,34p,32p.,25d#4,19p,172e,172p,172a7,172p,172d#7,86p,86p,57e,57p,29p,43f7,172e3,57p,43e3,86p,86d#4,172p,57p,57p,57p,57p,86d8,172f,57p,29p,172f#7,43f3,16p,172g#6,172p,172p,172d#8,172p,172f7,172p,43p,172e6,86p,43g7,43p,172d8,172g6,172p,172p,172p,172p,172p,172b7,86p,172e6,86p,43p,43g7,43p,172d#8,172g#6,172f#3,17p,172a6,172p,172f7,172p,172p,172b7,172p,43p,172e6,172p,43g7,86p,29p,29p,172f7,172c#4,86p,34p,16p,172a#6,172p,172d#8,172p,86b7,86p,43p,172e6,86p,172g7,172p,57f#3,86a6,17p,172a6,172b7,57f7,34p,172e6,172p,43g7,172a#6,172p,172d#8,86p,86p,172f7,172p,25p,57g7,57p,172a6,86g#6,25p,172f#3,86p,172a6,172p,172p,172p,172d#8,172p,172p,172f8,57p,34p,34p,86d8,172a7,57p,43p,172g#6,86a#6,172p,14p,172a#6,172p,172p,172p,172f#8,172p,172d8,86p,57p,43p,86g6,25p,172a6,172g#6,172g6,17p,172a6,172p,172p,172p,172g8,172f8,172a#,43p,172a#3,57b7,86p,34p,43a6,19p,13p,13p,13p,172d#8,172g6,172p,172f7,86p,57p,25p,43g7,43p,172d8,172p,172p,172p,172d#8,172p,172p,172p,43p,172e6,172p,172f#3,172p,43g7,172a6,172p,172f#3,19p,172a6,172p,172f7,172p,172p,172b7,172f#3,86p,172e6,172p,34g7,86a#6,86c#4,34p,17p,172a#6,172d#8,172f7,172p,172b7,172p,57p,86e6,34p,86f#3,172a6,172g#6,34p,25f#3,25p,172a6,172b7,172p,172f7,172p,34p,25p,43g7,43p,172b7,172p,172d#8,172p,43p,32p.,34g7,34p,34p,172a#6,172p,172d8,43p,57e8,43p,25p,25p,172a#7,172g#6,172p,172p,172c8,172p,172d7,34p,86c#6,86d#4,172a6,172g#6,43p,57e8,57p,86a#4,86p,86p,86p,86p,86p,172c8,172g#7,57p,34p,25p,57c#6,172p,43p,172g#6,172p,172g6,172p,172a6,43p,57d7,57p,29p,172c#8,172p,172p,172p,172p,86d8,57p,172f3,86p,172b7,172p,86p,86f#7,172p,172f3,172g6,172p,57p,86d#7,172f#8,29p,32p.,32p.,32p.,172d#8,86c#,43p,86e6,57p,86g7,172g6,86f6,13p,172g#6,172p,172p,172p,172d#8,172b7,172p,43p,172e6,25p,172g#6,172p,172p,172p,172d#8,172p,43p,25p,43g7,172f#6,172p,172f8,172p,172p,57p,43p,25p,15p.,43c#4,34p,19p,19p,172c#8,172p,86b7,57p,29p,29p,172e6,43g7,43p,43p,43p,43p,172c#8,172d#8,172p,172p,172f7,86p,172e6,43p,57g7,57p,86g#6,172a6,57p,43f#4,57f#3,172g#6,172f#6,172a6,172p,16p,16p,16p,172b7,43p,172f#,172f#3,57p,172g7,86p,172a6,172p,86p,172d#8,172p,172p,172p,172b7,43p,25p,43g7,43p,43p,172a#6,172c#6,172p,86p,172e7,43p,17p,57a#6,86p,57c#4,43p,25p,172b6,172p,172c#8,172p,172d#8,172p,34p,29p,86e6,86p,57g7,57p,172b6,86p,13p,172a#6,172p,172p,172d#8,172p,172p,172f8,172g#4,43p,43p,172d8,172g#3,172a7,86p,172g#3,172p,172a#6,43p,29f#6,86p,172a6,172p,172p,172p,172p,172f8,172p,172p,172c#8,29p,86a7,57f#6,57p,43p,172d#8,172p,172p,172p,172p,172f8,43p,43p,29p,86a7,57p,34p,34p,29p,172g6,86p,57p,43p,25p,14p,172g6,172a6,172p,43p,57c#4,34p,32p.,32p.,172c#8,172p,57f8,172p,172g#,172p,172d8,172p,172a7,43p,34p,172c#8,172f#6,172p,172d#,57p,172f#6,172p,86p,57a7,86p,34p,57a#6,43p,86f#6,57g#3,172a#6,172p,86p,86p,172g8,43p,29f#7,172a#6,172p,172p,172d#8,172p,172c#8,43p,25p,43a7,34p,172d#8,172p,172c#8,172d#,86p,25p,57a7,57p,57p,57p,43p,43p,43p,172g8,172c#4,86p,29p,16p,57a6,86p,57c#4,34p,172a6,172p,172p,172d#8,172p,172p,172p,172p,172f8,86p,34p,86g#3,172a7,57p,34p,32p.,15p.,172g#6,172p,172p,57f#8,57p,34p,32p.,43a3,43p,86d8,16p,172g6,172p,172p,172p,172f#8,172g#7,86p,172a3,29p,172f#6,172p,86p,172f#8,172p,172g#7,34p,34g6,172a6,172p,86p,172g6,57p,172a6,57p,17p,16p,172a6,86p,57c#4,34p,172e,172p,172p,172d8,172g6,86p,34p,172a3,86a#7,86p,172a#7,172p,172p,172p,172d8,172f#8,43p,34p,57a3,57p,172a6,86e3,32p.,86a3,172a6,13p,12p,12p,12p,172e8,57p,34p,29p,34a3,172p,29p,29p,29p,172d8,172p,172e,25p,32p.,57g6,57p,86c#8,34p,32p.,13p,172g6,172f#6,172e6,86p,43c#4,43p,32p.,172c8,172p,172p,172p,172p,86d8,57p,43p,172a,86p,43a#7,43p,29p,86f6,172g6,19p,17p,172f#8,172p,172p,86e8,172p,57p,172a6,57p,43c8,86p,25p,86a#7,172a6,32p.,172g#6,172b4,172p,172p,172a#7,172e8,86b3,86p,43c8,57p,25p,172e8,172p,86f#,57p,43c8,172p,34p,172g6,172p,86p,172b6,86p,29p,14p,57g6,86p,14p,172g#6,172g6,172p,172p,172e8,172p,172a6,34p,34p,57c8,86p,34p,172g#6,172p,172e8,172f#,43p,34p,34c8,172p,29p,172a#7,172a#6,172p,29p,29b3,29p,86d#8,172f#6,16p,14p,14p,14p,172e8,172f#,172p,57p,172b,43p,57b3,57p,86a#6,43p,57a6,43p,25p,25p,25p,172b6,172f8,172p,172f#,172p,57p,57e7,25p,172b6,172e8,172p,172p,172a#7,57p,43p,57f8,172p,57b3,57p,172a#6,172p,86p,86p,172f#8,172e,172p,43p,29p,57a#7,172a3,86p,86g#6,13p,13p,13p,13p,172d#8,172p,86f7,86p,43p,25p,25p,86g7,172g4,86f#,86p,172e3,172c#,86p,57d4,43p,25p,25p,172d#8,86b7,43p,172f#,172p,43g7,86p,29p,29p,29p,29p,86b7,86p,29p,25p,172g7,86e3,172g#3,172p,86p,86p,172d#7,172p,172p,172f#8,57p,172g8,172p,86p,172d8,86p,34p,12p,86e3,57p,172b2,86p,86p,86p,86p,57b7,172p,34p,25p,25p,86g7,172p,172g#3,172b7,172d#8,172p,172p,172f7,86p,25p,29g7,43p,43f#4,57f#3,172p,43p,43p,172f#8,43p,86d8,172b6,57p,172b7,172p,172c8,172a#4,172p,172p,86p,43p,25p,14p,12p,12p,12p,12p,12p,172c8,34p,25p,86c#6,86p,34p,34p,34p,172c#8,172p,172d#7,172p,86p,43p,172e,172p,57p,86f7,32p.,57e3,34p,32p.,32p.,32p.,32p.,86d8,172f,86p,172b7,86p,57p,172f#7,172f4,34p,29f3,43p,17p,17p,172d#8,172p,172f7,172p,172f#,86p,34p,43g7,86f#3,43p,57f#3,29p,19p,19p,19p,19p,172d#8,86f#,57p,172e6,172p,34g7,86p,25p,25p,25p,25p,86d#8,172f#3,172p,29p,86g7,172p,43p,43p,172f#8,172p,172p,57g8,34p,17p.,34c#4,34p,172c#,172p,172b7,57f#3,57p,43p,29p,43g7,43p,172b7,172d#8,172p,172p,86f7,172p,172e6,43p,34g7,19p,43f#4,57f#3,172g#,172p,57f#8,172g8,172p,172d8,172p,172b6,57p,172b7,172p,172c8,172p,172p,172g#7,172p,25p,16p,172d4,172p,172g#7,172p,172d7,57a#7,172p,43p,29p,57c#6,172p,34p,34p,172c#8,172p,172d#7,172p,172e,43p,43p,29p,172f7,57e3,172p,86e3,57p,86e3,29p,32p.,32p.,32p.,32p.,86d8,172f,43p,172d#6,172f#7,57f4,57p,29f3,57p,172b7,172d#8,172p,172f7,172f#,172c#8,172p,172e6,86p,86g7,57p,29p,57c#8,172p,172f#3,86c#6,43p,172c#8,172p,172p,172f7,172b7,172p,57f#,172e6,172p,43g7,172p,172d,172p,172b7,172p,86p,172c#8,86f#3,34p,34p,43c#8,43p,172d#7,172p,172p,172f#8,172p,172p,172g8,172p,34p,29p,57c#8,172p,17p,57c#4,34p,172c#,172p,172p,172d#8,172b7,172f#3,86p,57p,43p,86f#3,34p,172a#7,172b7,172p,172p,172p,172d#8,172p,57p,34p,25p,172g7,19p,86f#4,86f#3,43p,29p,29p,172f#8,172p,57g8,86p,17p,17p,172b7,172p,172c8,172a#4,172p,172p,14p,172c#6,172p,34g#7,172d#,25p,25p,172a7,172p,172c#8,172c#4,172b4,57p,43p,43p,29p,172f7,57p,17p,57e3,43p,172c,172p,172p,172p,86d8,172f,43p,172d#6,86f#7,172c#6,172f3,13p,12p,12p,172b7,172d#8,172p,172f7,172f#,86p,29p,172g7,43c#6,172p,57f#3,19p,14p,14p,14p,172d#8,172b7,172f#,57p,172e6,57p,57c#6,86p,34p,34p,34p,34p,172d#8,172p,172f#3,172p,172e6,57p,57g7,86p,34p,34p,34p,172f#8,172p,86g8,34p,13p,57c#6,57c#4,34p,172c#,172p,172p,57d#8,43p,172f#,86p,86f#3,57g7,43p,172b7,172p,172p,172p,57d#8,25p,43g7,34p,19c#6,19p,19p,19p,172f#8,57p,172g8,25p,172b7,172a#7,172p,172p,172c8,172p,86p,86d#,34p,17p,17p,86e7,86p,86p,172g#7,43p,29p,16p,172g#,172p,172p,172c#8,172p,172p,172d#7,172p,172b4,86p,172e,43p,172f7,172p,43e3,17p,172c#6,172p,172d8,172p,172p,172a#7,86f,57p,172d#6,43f#7,172p,16p.,172a6,172p,172p,172p,172d#8,172p,172f7,86f#,86p,25p,43g7,43p,86d#8,57p,29p,86d#8,57p,29p,172f#6,172c#8,172p,172p,172p,172d#8,172p,172p,172p,172b7,172f#3,172p,172c#8,86c8,86g7,57p,172c#8,172p,172p,172p,86b7,172f#3,172p,29p,57g7,57p,43p,43p,172c#8,172p,172p,172c8,172p,172g8,172p,43p,43p,14p,86c#8,86c#4,25p,19p,172d#8,172c#,172b7,86f7,172p,43p,43p,34p,172e6,86g7,86p,43p,43p,172c#8,172d#8,172p,172p,172p,172g#6,172f7,86p,57p,57p,86c#8,172p,57g7,29p,32p.,86e6,57f#3,172p,57f#3,57p,172f8,16p,172f#3,172p,172p,172p,172p,172c8,86f#8,86p,34p,57d8,43p,25p,172b7,172p,172p,172d#8,172p,172f#3,172p,172e6,43p,86g7,172a6,172p,172d#7,172p,172p,172g8,172p,86p,57p,34p,172d8,14p,57c#4,34p,32p.,32p.,172b7,172p,86d#8,172p,25p,25p,34g7,86p,19f#3,172p,172a6,172p,172p,172p,172p,172f8,172g#,172g#4,172f#6,172p,172d8,172p,86g#3,57p,34p,172d#8,34p,57d#8,172p,172g#3,57p,57p,57p,172d#8,172p,172p,172p,172g7,43p,172g#3,86p,57a7,57p,29p,172c#8,172p,172p,57g7,29p,43a7,172p,172c#8,172p,172d8,86a#,86p,172e8,172p,86c#8,17p,57c#8,32p.,16p,16p,172d#8,172p,172p,172f8,172g7,172g#,86p,34p,34p,57a7,86p,34p,34p,34p,172d#8,172p,172p,172f8,86p,172g#4,57p,172g#3,86a7,86p,34p,172e3,172e6,32p.,57g#3,172c7,172p,172p,172a#6,86p,13p,13p,172a6,172d8,172d#,172p,57e8,34p,172f#6,86p,86p,86p,57c#8,29p,172g#3,57a7,172p,34p,34p,34p,34p,34p,172d#8,172p,172c#7,172c#4,172p,86p,34p,7p,7p,7p,7p,7p,172f#6,172c#8,43p,29p,29p,57a7,172p,172g#3,13p,12p,172b7,172p,172p,172c#8,172c#3,86e4,172p,34p,34p,86d6,172f7,172a6,172p,86p,86p,172d#8,34p,86d#8,172e3,86p,34p,34p,172c#8,172p,172p,172d#8,172p,86a7,172p,172e,57p,43p,86f7,86p,34p,34p,172a7,172p,172c#8,172p,86e,172p,57p,57p,172a#7,57f7,86p,172c#8,172p,172p,172e8,172c#4,86p,57p,172c#8,172p,86c8,172p,34p,32p.,172c#8,57p,25p,14p,14p,172d#8,172p,172p,172p,172c#8,172d#7,86p,172d#8,172d6,86p,172e3,86f7,172p,57p,172c#8,172p,172d#8,172p,172d#7,172p,172a7,86p,43p,172a#7,172p,86p,57f7,172p,172f6,86p,172d6,172p,17p,172e3,172a#6,172p,86d#8,57p,34p,34p,57f8,43p,25p,172c#8,172p,172p,172a#7,172e8,86p,34p,34p,43c8,86p,29p,172e6,172e4,172p,172c#8,172a7,172p,57p,172d6,172p,172a#7,172e3,172f7,86p,57p,172c#8,172p,172e8,86p,57p,172a6,172p,86f8,172c8,17p,10p,86e6,86p,86p,172d#6,172p,172c#8,57p,32p.,34f7,16p,16p.,16p.,172d#8,86c#,86p,172f7,86p,43p,86d#8,86g7,172f#7,172p,86p,172g#7,172c#6,57f#3,86f8,172p,86g#7,57p,34p,172b7,172p,172p,172p,86f7,86p,172f#3,172c8,172p,86g7,43p,29p,29p,29p,29p,86d#8,172f#3,29p,86g7,172a6,172p,172p,172d#7,172p,172p,172f#8,172p,172g8,172p,43p,172d8,86p,172b6,32p.,43c#4,43p,32p.,172b7,172c#,43f7,34p,57f#3,57g7,57p,57p,172c#8,172g8,172p,172p,172f7,172e6,86p,57p,86c#8,172p,57g7,32p.,86e6,86f#4,86p,43p,57e6,172a6,172p,172p,172p,172f#8,172f#6,172p,172b6,172g8,86d8,43p,29p,172b7,172p,172a7,172p,172p,172c8,86p,32p.,172c#6,57d#4,57p,57p,172a7,172p,172c8,172p,172g#7,34p,25p,172c#6,172e6,86p,57p,172a7,172p,172p,172p,172c#8,172p,172d#7,172p,86p,43p,172e,43p,172f7,57p,86e3,86p,43e3,57p,172f6,172a#7,172p,172p,172p,172d8,172f4,172f,34p,57f#7,86f3,14p,12p,12p,12p,172d#8,172p,172f7,172p,86f#,172p,172e6,86p,43g7,172g#6,86d#8,57p,34p,57d#8,57p,25p,172f#6,172p,172c#8,172p,172p,172p,172p,172d#8,172p,172g#6,172p,57p,172c#8,172p,43g7,86p,29p,172c#8,172p,172p,86b7,172f#3,172p,34p,43g7,172a,172p,172c#8,172p,172p,172p,86g8,172p,34p,34p,14p,57c#8,86c#4,25p,19p,172d#8,172p,172c#8,172b7,57p,172f#,172p,172p,25p,25p,25p,25p,172d#8,172p,86p,86p,172g#6,172p,172p,172f7,86p,172c#8,86p,86g7,43p,32p.,86e6,29f#4,29p,172b6,86f8,16p,13p,13p,13p,13p,172c8,172f#8,172c#6,86p,43p,57d8,57p,172b7,86p,86p,86p,172f#,172p,172f#3,172p,172e6,86p,43g7,172a6,172p,172p,172c#6,172p,172g8,172p,86p,172b6,57p,172d8,14p,57c#4,43p,172e6,172p,172p,172b7,172d#8,172p,57p,25p,172f#3,43g7,86p,19f#3,172p,172a6,172p,172p,172p,172p,172f8,172g#,86g#4,57p,172d8,172p,86g#3,172p,86a6,86p,172d#8,34p,34d#8,25p,25p,172d#8,172p,172p,172p,172p,172g7,57p,172g#3,172p,43a7,57p,25p,172c#8,172p,57g7,43p,172d8,172p,172a7,43p,172c#8,86p,86a#,86p,172e8,172p,86c#8,17p,43c#8,25p,16p,16p,172d#8,172p,172p,86f8,172g#,172p,172d8,86p,172f#6,57p,172c#8,172p,172p,172p,172d#8,172p,172g#6,172p,86d#,57p,172g#3,86a7,86p,43p,172a#7,86p,57p,17p,57g#3,172b6,172p,172p,172a#6,57p,86f#6,29p,172a6,172p,57p,29p,57e8,43p,25p,172f6,172p,172g7,172p,172c#8,86f#6,172g#,172p,172d8,86p,172a7,57p,172a6,172p,172p,172d8,172a#,172c#4,172e8,172p,86p,86f#6,9p,9p,172b7,172p,172p,172c#8,172p,172g7,57p,34p,172g#3,86a7,86p,172g#3,13p,12p,172b7,172p,172c#8,172p,172d#7,86e4,172p,43p,34p,86e3,172f7,172a6,172p,86p,86p,86d#8,43p,86d#8,172e3,86p,34p,34p,172c#8,172p,172p,172p,172p,57a#7,172p,172e,86p,43p,86f7,86p,34p,34p,34p,172c#8,57p,86e,172p,57p,43p,43f7,172p,172c#8,172p,172e8,172p,172a#7,86p,57p,172c#8,172p,86c8,57p,19p,172c#8,86p,29p,17p,172g#6,172p,172d#8,172p,172p,172p,172c#8,172d#7,86p,172d#8,86p,57p,172e3,86f7,172p,172c#8,172p,172d#8,172p,172p,172d#7,172p,172a7,86p,172e,172p,172a#7,86p,86p,86f7,86p,43p,172b7,172e6,17p,172e3,172p,172p,172c7,172b,43p,172f#6,29d7,172a6,172p,172p,172p,86e8,172p,43p,86f8,172c8,34p,29p,172b7,172p,172p,172p,172c#8,172p,172a7,86p,29p,172d6,86p,86f7,172f#6,172a6,172c4,86p,57p,172f8,86p,172c8,16p,9p,172f#6,172b7,172p,172p,172p,172c#8,172d#7,172e3,172p,57p,34p,86e3,172f7,34p,29e3,43p,17p,17p,172d#8,172c#,172c#3,172p,172f7,86p,43p,172d#8,86g7,86f#7,172p,57p,57p,172f8,172f#4,172f#3,86p,172f8,172e6,172p,172g#7,43p,34p,172b7,172p,172p,172p,86f7,86p,29p,172g7,29p,25p,25p,172b7,172p,86f#3,43p,57g7,57p,172a6,172p,172p,172p,172f#8,172p,172p,172c8,172g8,172p,43p,43p,172d8,19p,34c#4,43p,19p,172b7,172c#,43f7,34p,34p,86c8,86g7,86p,43p,43p,172c#8,172p,86p,86p,172f7,86e6,172p,57p,86c#8,172p,57g7,34p,29p,172f#6,43p,86f#3,86p,43p,57e6,57p,172a#6,172p,172p,86f#8,86p,34p,16p,172b7,172p,172p,172c#8,172p,172p,172c8,172p,86p,25p,16p,172e6,172p,172a#7,172d#6,172p,172p,172g#7,86p,172d#3,57p,172c#6,86p,57p,172g6,172c#8,172p,172a7,172p,86d#7,43p,34p,34p,25p,172f7,57e3,172p,86e3,17p,14p,172a#7,172p,172p,86d8,25p,172d#6,34f#7,15p.,15p.,172d#8,172p,172p,172p,172f7,172p,172g#2,57p,43p,86g4,172g7,172g#4,172p,172c#,43p,86f4,9p,57c4,14p,86c#4,34p,12p,86c3,10p,86b3,172g#2,43p,172c#3,172p,86a2,p.,86c#4,34p,16p.,57c#4,34p,32p.,172e,172p,172d8,172a3,172a,172g6,86p,86a#7,43p,25p,25p,25p,172b7,172p,172f#,172e6,172f#3,86p,43g7,43p,172b7,172d#8,172p,172p,172f7,86f#,172p,57p,19p,29f#3,172p,43f#3,8p.,86c#4,34p,16p.,57c#4,3p,172b7,172p,172c#8,172p,172a7,172p,172d#7,172e4,172p,172e,86p,43p,29f7,29p,57e3,57p,172c#4,86b4,34p,16p,172e3,172p,172p,172p,172p,172p,86d8,86p,25p,25p,172d#6,57f#7,6p,172e3,172p,172b7,172d#8,86f7,172p,57p,172f#,43p,34g7,29p,57f#3,172p,43f#3,8p.,86c#4,34p,16p.,57c#4,2p,86c#4,34p,16p.,57c#4,34p,172e,172p,172p,172d8,86a3,172a,57p,57a3,57p,172c#,172p,172b7,43p,43p,172e6,86p,43g7,13p,86f#3,14p,12p,172f#,172p,172d#8,86f7,57p,29p,34g7,86p,25f#3,34p,17p.,10p,6p,57c#4,3p,p.,172c#8,172p,172b4,172p,172p,172a7,86p,172e,86p,57p,172e3,29f7,25p,86e3,172p,57d7,57p,34p,32p.,12p,172e3,172p,172p,172e7,172a#7,57p,34p,25p,57f#7,172f3,25p,29f3,13p,9p,9p,86d#8,86f7,57p,29p,43g7,172f#3,34p,34f#3,86p,172g6,86f#6,7p,7p,86a6,43p,25p,14p,34g#6,172p,57c#4,34p,43g6,8p,172a#6,86g#6,17p,172a6,86g#6,16p,86g6,7p,7p,86a6,172c#4,86p,29p,16p.,57c#4,34p,172c#6,172p,172p,57f8,17p,13p,13p,172f#,172p,172p,57d#8,43p,25p,57g7,3p,86c#4,34p,16p.,57c#4,3p,p.,p.,172c#8,172p,172p,172a7,172p,57p,29p,29p,32p.,29f7,29p,172e3,86p,172d4,172p,172b4,86c#4,34p,14p,14p,14p,172d8,172p,172p,86a#7,86p,172f3,172p,86p,172d#6,57f#7,172p,172f3,57p,172f4,32f.3,14p,172e3,172p,172p,172d#8,172p,86f7,43p,29p,43g7,172a#6,172g#6,34p,43f#3,57p,172g#6,172g6,16p,172a6,86g#6,17p,14p,172g#6,172a#6,172c#4,86p,29p,16p.,43c#4,43p,172g#6,172g6,16p,172a6,86g#6,17p,14p,86g#6,16p,43a6,32p.,34a6,8p,6p,86a#6,43p,25p,14p,172a6,86g#6,57p,57c#4,34p,32p.,172e,172p,172p,172d8,57a3,29p,57a#7,86p,172c#,172p,172b7,86f#,172e6,172f#3,57p,57g7,13p,172f#3,13p,12p,172f#,172b7,172f7,86f#3,34p,34g7,86p,32f#.3,43p,17p.,15p.,6p,57c#4,3p,p.,172c#8,172p,172a7,172p,172d#7,57p,86e,57p,172e3,43f7,12p,172c#4,86b4,34p,16p,172e3,172p,172p,172p,172p,86a#7,86p,172f3,86p,172d#6,57f#7,86f3,12p,57f3,25p,172b7,172p,172d#8,172p,172p,172f7,172p,43p,34p,29p,172g4,86g7,172g#4,57p,43p,172c#,43p,86c3,29p,25f#,43p,57c4,86p,43c3,34p,57c#4,17p.,86c3,19p,86f3,86p,86f#2,86p,86b3,86g#2,43p,172c#3,172p,86a2,p.,57c#4,29p,16p.,57c#4,34p,172e,172p,172g#7,172p,86d8,172a,19p,86c#,86p,86p,172b7,172p,172f#,172e6,43p,57g7,172p,43p,172b7,172d#8,172p,172p,172f7,172f#,86p,57p,29p,29g7,p,86c#4,34p,16p.,57c#4,3p,172b7,172p,172p,172c#8,172p,172a7,172d#7,57p,172e,86p,43p,43f7,172p,14p,57e3,34p,172b4,86c#4,34p,14p,14p,14p,172d8,172p,172p,86a#7,172p,172c#4,172f3,172p,86p,172d#6,86f#7,86p,172f3,9p,57f3,57p,29p,29p,29p,172d#8,172f7,86p,34p,32p.,43g7,34p,34f#3,6p,86g#,172c#4,86p,29p,16p.,43c#4,3p,86f#3,6p,86c#4,34p,16p.,57c#4,34p,32p.,172e,172p,172d8,172a3,86a,34p,57a#7,86p,172c#,172p,172p,172d#8,172p,172f#,172p,86p,172e6,57p,57g7,16p.,172f#3,14p,172c#,172f#,172b7,86f7,172f#3,43p,34g7,86p,25f#3,34p,86c#4,34p,16p.,57c#4,3p,172c#8,172p,172p,172a7,172c#3,172e4,57p,43p,43p,86a#7,86f7,16p,86e3,57p,172c#4,86b4,34p,16p,172e3,172p,172p,172p,172p,172p,86d8,86p,29p,86d#6,57f#7,172f3,17p.,86f3,32p.,172b7,172p,172d#8,86f7,43p,43p,25p,34g7,172p,57f#3,172p,34f#3,86p,172g6,86f#6,8p,172a6,86g#6,43p,25p,14p,172g#6,86g6,57p,57c#4,43p,172g6,86f#6,7p,172a#6,86g#6,17p,172a6,86g#6,17p,172g#6,172g6,7p,172d#4,172a6,172p,86c#4,172p,34p,16p.,57c#4,34p,172c#6,172p,32f#.6,43p,172c#,172p,172p,172p,172p,57d#8,172p,43p,25p,43g7,3p,57g#,34p,32p.,10p,43c#4,9p.,86f3,7p,172b7,172p,172c#8,172p,172p,172a7,172e4,34p,34p,86d6,34f7,25p,86e3,57p,172b4,86c#4,34p,14p,14p,172d8,172p,172p,86a#7,172p,172c#4,57p,57p,172d#6,86f#7,86p,172f3,7p,7p,7p,172d#8,172p,86f7,57p,172e6,86p,43g7,43p,172a#6,29p,57f#3,43p,172g#6,14p,172a6,86g#6,17p,172g#6,172a#6,172c#4,86p,34p,16p.,57c#4,34p,172g#6,86g6,19p,34a6,32p.,43g#6,19p,34a6,32p.,172a6,57g#6,7p,7p,86a#6,43p,25p,14p,172a6,86g#6,57p,57c#4,34p,32p.,172e,172p,172p,172d8,57a3,34p,34p,57a#7,57p,172c#,172p,172b7,86f#,172e6,43p,34g7,14p,172f#3,14p,172c#,172p,172p,86d#8,86p,172f7,86p,29p,34g7,86p,25f#3,34p,86c#4,34p,16p.,57c#4,3p,p.,p.,172c#8,172p,172a7,172p,172d#7,172e4,172p,172e,172p,86p,43p,43f7,32p.,57e3,57p,172c#4,86b4,43p,16p,172e3,172p,172p,172p,172p,172p,86d8,86p,172f3,86b7,172d#6,172f#7,86p,172f3,9p,57f3,57p,29p,29p,172d#8,172p,172p,172f7,57p,34p,25p,172g4,172g7,86p,43p,29p,172c#,86g#3,17p,43f#,57f#3,43p,57c4,86p,57c3,25p,86e3,32p.,86a#2,86b2,86c3,25p,86f3,29p,86b3,172g#2,25p,86c3",
	"gameMMMopendoor,d=4,o=5,b=120:13c7",
	"gameMMMclosedoor,d=4,o=5,b=120:40e7,40f4",
	"gameMMMfunny,d=4,o=5,b=120:84e8,84d#8,84p,84p,84p,84p,84d8,84p,28p,28p,28p,28p,28p,28p,32p.,32p.,32p.,32p.,84e7,42p,42p,42p,42p,42p,42p,84f#7",
};

// Control variables
uint32_t currentDuty = 0;
uint8_t isPlaying = RESET;
uint8_t isRepeatMode = RESET;
ToneMode_TypeDef playMode;

// RTTTL playing variables
uint16_t default_dur;
uint16_t default_oct;
uint16_t bpm;
uint32_t wholenote;
const char *curSong;
uint16_t curPos = 0;
uint32_t nPeriods = 0;

// Private functions definition
static void Tone_SetFreq(uint32_t freqvalue);
static void Tone_SetDuty(uint32_t value);
static uint16_t GetNextNote(const char *song, uint32_t pos, uint16_t *scale, uint16_t *note, uint32_t *duration);

// Configures Piezo PWM
void Tone_Init(ToneMode_TypeDef mode) {
	GPIO_InitTypeDef GPIO_InitStructure;
	TIM_TimeBaseInitTypeDef  TIM_TimeBaseStructure;
	TIM_OCInitTypeDef  TIM_OCInitStructure;
	NVIC_InitTypeDef NVIC_InitStructure;

	// Save the playing mode (IRQ or Blocking)
	playMode = mode;

	// GPIOx Clocks enable
	RCC_AHB1PeriphClockCmd(TONE_GPIO_CLK, ENABLE);

	// GPIOx Configuration
	GPIO_InitStructure.GPIO_Pin = TONE_PIN;
	GPIO_InitStructure.GPIO_Mode = GPIO_Mode_AF;
	GPIO_InitStructure.GPIO_Speed = GPIO_Speed_100MHz;
	GPIO_InitStructure.GPIO_OType = GPIO_OType_PP;
	GPIO_InitStructure.GPIO_PuPd = GPIO_PuPd_UP;
	GPIO_Init(TONE_GPIO_PORT, &GPIO_InitStructure);

	// Pin AF Config
	GPIO_PinAFConfig(TONE_GPIO_PORT, TONE_PIN_SOURCE, TONE_GPIO_AF);

	// TIMx clock enable
	RCC_APB2PeriphClockCmd(TONE_TIM_CLK, ENABLE);

	// Time Base configuration
	uint16_t prescaler = 100;
	uint32_t totalticks = ((uint32_t)84000000/(uint32_t)NOTE_B7)-1;
	uint16_t period = (uint16_t)((float32_t)totalticks/(float32_t)prescaler);
	TIM_TimeBaseStructure.TIM_Prescaler = prescaler;
	TIM_TimeBaseStructure.TIM_CounterMode = TIM_CounterMode_Up;
	TIM_TimeBaseStructure.TIM_Period = period;
	TIM_TimeBaseStructure.TIM_ClockDivision = TIM_CKD_DIV2; // El TIM1 va a 168MHz, DIV2 per baixar-lo a 84MHz
	TIM_TimeBaseStructure.TIM_RepetitionCounter = 0;
	TIM_TimeBaseInit(TONE_TIM, &TIM_TimeBaseStructure);

	// Channel in PWM mode
	TIM_OCInitStructure.TIM_OCMode = TIM_OCMode_PWM2;
	TIM_OCInitStructure.TIM_OutputState = TIM_OutputState_Enable;
	TIM_OCInitStructure.TIM_OutputNState = TIM_OutputNState_Disable; // Complementary output disabled
	TIM_OCInitStructure.TIM_OCPolarity = TIM_OCPolarity_High;
	TIM_OCInitStructure.TIM_OCNPolarity = TIM_OCNPolarity_High;
	TIM_OCInitStructure.TIM_OCIdleState = TIM_OCIdleState_Set;
	TIM_OCInitStructure.TIM_OCNIdleState = TIM_OCIdleState_Reset;
	TIM_OCInitStructure.TIM_Pulse = 0; // 0% of duty when starts
	TONE_TIM_CH_INIT(TONE_TIM, &TIM_OCInitStructure);


	if (mode == TONE_MODE_IRQ) {
		nPeriods  = 0;

		// Enable and set Button TIM9 Interrupt to the lowest priority
		NVIC_InitStructure.NVIC_IRQChannel = TONE_IRQn;
		NVIC_InitStructure.NVIC_IRQChannelPreemptionPriority = 0;
		NVIC_InitStructure.NVIC_IRQChannelSubPriority = 0;
		NVIC_InitStructure.NVIC_IRQChannelCmd = ENABLE;
		NVIC_Init(&NVIC_InitStructure);

		// Enable TIMx Update Interrupt
		TIM_ITConfig(TONE_TIM, TIM_IT_Update, ENABLE);
	}

	// TIMx counter enable
	TIM_Cmd(TONE_TIM, ENABLE);

	// TIMx Main Output Enable
	TIM_CtrlPWMOutputs(TONE_TIM, ENABLE);


	// Initial Volume
	Tone_SetVolume(20);
}

// Set Piezo Freq in Hz
static void Tone_SetFreq(uint32_t freqvalue) {

	TIM_TimeBaseInitTypeDef  TIM_TimeBaseStructure;

	uint16_t prescaler = 100;
	uint32_t totalticks = ((uint32_t)84000000/(uint32_t)freqvalue)-1;
	uint16_t period = (uint16_t)((float32_t)totalticks/(float32_t)prescaler);

	// Time Base configuration
	TIM_TimeBaseStructure.TIM_Prescaler = prescaler;
	TIM_TimeBaseStructure.TIM_CounterMode = TIM_CounterMode_Up;
	TIM_TimeBaseStructure.TIM_Period = period;
	TIM_TimeBaseStructure.TIM_ClockDivision = TIM_CKD_DIV2; // El TIM1 va a 168MHz, DIV2 per baixar-lo a 84MHz
	TIM_TimeBaseStructure.TIM_RepetitionCounter = 0;
	TIM_TimeBaseInit(TONE_TIM, &TIM_TimeBaseStructure);

	// Restart the counter
	TIM_SetCounter(TONE_TIM, 0);

}

// Set PWM Duty of the PWM (0 to 100000) = 0.000 to 100.000
static void Tone_SetDuty(uint32_t value) {

	// Evitem un valor mes gran que 100000
	if (value > 100000) value = 100000;

	// Compute CCRx value to generate a duty cycle at XX% for CHx
	TONE_TIM->TONE_TIM_CCR = (uint32_t) (((uint32_t)value * (uint32_t)(TONE_TIM->ARR - 1)) / (uint32_t)100000);


}

// Change the duty, volume from 0 to 100% (duty from 0 to 10%)
void Tone_SetVolume(uint32_t volume) {
	currentDuty =  volume * 100;
}

// Play a Note
void Tone_PlayNote(uint32_t freq, uint32_t duration) {
	Tone_SetFreq(freq);
	Tone_SetDuty(currentDuty);
	Delay_ms(duration);
	Tone_SetDuty(0); // Mute
}

// Do Beep
void Tone_doBeep(void) {
	Tone_PlayNote(NOTE_B7, 200);
}

// Do DoubleBeep
void Tone_doDblBeep(void) {
	Tone_doBeep();
	Delay_ms(200);
	Tone_doBeep();

}

// Returns if is playing
uint8_t Tone_isPlaying(void) {
	return isPlaying;
}

// Stops the current song
void Tone_StopPlaying(void) {
	isPlaying = RESET;
	nPeriods = 0;
	Tone_SetDuty(0);
}


// Repeats the song when it is finished
void Tone_RepeatSong(uint8_t state) {
	isRepeatMode = state;
}

// Return current melody name
void Tone_GetCurrentSongName(char *songName) {
	uint16_t pos = 0;
	while(curSong[pos] != ':') {
		songName[pos] = curSong[pos];
		pos++;
	}
	songName[pos]='\0';
}

// Plays RTTL melody
void Tone_PlayRTTTL(const char *song) {
	uint16_t num;
	uint32_t duration;
	uint16_t note;
	uint16_t scale;
	uint16_t freq;

	// Check if already playing
	if(isPlaying == SET) Tone_StopPlaying();

	// Set Song variabls
	curSong = song;
	curPos = 0;

	// Skip name
	while(curSong[curPos] != ':') curPos++;
	curPos++; // skip ':'

	// Get default duration
	if(curSong[curPos] == 'd'){
		curPos++; curPos++; // skip "d="
		num = 0;
		while(isdigit(curSong[curPos])) {
			num = (num * 10) + (curSong[curPos] - '0');
			curPos++;
		}
		if(num > 0) default_dur = num;
		else default_dur = 4;
		curPos++; // skip comma
	}
	//printf("Default Duration: %d\r", default_dur);

	// Get default octave
	if(curSong[curPos] == 'o') {
		curPos++; curPos++; // skip "o="
		num = curSong[curPos] - '0';
		curPos++;
		if(num >= 3 && num <=7) default_oct = num;
		else default_oct = 6;
		curPos++; // skip comma
	}
	//printf("Default Octave: %d\r", default_oct);

	// get BPM
	if(curSong[curPos] == 'b') {
		curPos++; curPos++; // skip "b="
		num = 0;
		while(isdigit(curSong[curPos])) {
			num = (num * 10) + (curSong[curPos] - '0');
			curPos++;
		}
		bpm = num;
		curPos++; // skip colon
	} else {
		bpm = 63;
	}

	// BPM usually expresses the number of quarter notes per minute
	wholenote = (60 * 1000L / bpm) * 4;  // this is the time for whole note (in milliseconds)

	//printf("BPM: %d, WholeNote: %ld ms\r", bpm, wholenote);

	// Start playing notes
	//////////////

	// Mode blocking
	if (playMode == TONE_MODE_BLOCK) {
		// Playing flag
		isPlaying = SET;

		// Now begin note loop
		while(curSong[curPos] != '\0' && isPlaying == SET) {
			// Get the next Note
			curPos = GetNextNote(curSong, curPos, &scale, &note, &duration);

			// Play the note
			if(note) {
				freq = notes[(scale - 4) * 12 + note];
				Tone_SetFreq(freq);
				Tone_SetDuty(currentDuty);
				Delay_ms(duration);
			} else {
				Tone_SetDuty(0);
				Delay_ms(duration);
			}
		}
		isPlaying = RESET;
		Tone_SetDuty(0);

	// Mode interrupt
	} else {
		// Get the next Note
		curPos = GetNextNote(curSong, curPos, &scale, &note, &duration);

		// Check if is note or pause
		if(note) {
			freq = notes[(scale - 4) * 12 + note];
			Tone_SetFreq(freq);
			Tone_SetDuty(currentDuty);
		} else {
			freq = NOTE_B7; // default freq.
			Tone_SetFreq(freq);
			Tone_SetDuty(0); // silence
		}

		// Calculate time periods with current frequency for generate the correct note duration
		nPeriods = (uint32_t)((float32_t)duration / (float32_t)(1.0f / (float32_t)freq * 1000.0f)*2);  // x2 ja que el clock es DIV2

		// Playing flag
		isPlaying = SET;

	}
}

// Get next note (scale, note, an duration) and update the position
static uint16_t GetNextNote(const char *song, uint32_t pos, uint16_t *scale, uint16_t *note, uint32_t *duration) {
	uint16_t num;

	// first, get note duration, if available
	num = 0;
	while(isdigit(song[pos])) {
		num = (num * 10) + (song[pos] - '0');
		pos++;
	}
	if(num) *duration = wholenote / num;
	else *duration = wholenote / default_dur;  // we will need to check if we are a dotted note after

	// Get the note
	switch(song[pos]) {
		case 'c':	*note = 1;	break;
		case 'd':	*note = 3;	break;
		case 'e':	*note = 5;	break;
		case 'f':	*note = 6;	break;
		case 'g':	*note = 8;	break;
		case 'a':	*note = 10;	break;
		case 'b':	*note = 12;	break;
		case 'p':
		default:	*note = 0;
	}
	pos++;

	// Get optional '#' sharp
	if(song[pos] == '#') {
		*note +=1;
		pos++;
	}

	// Get optional '.' dotted note
	if(song[pos] == '.') {
		*duration += *duration/2;
		pos++;
	}

	// Get scale
	if(isdigit(song[pos]))	{
		*scale = song[pos] - '0';
		pos++;
	} else {
		*scale = default_oct;
	}
	*scale += OCTAVE_OFFSET;

	// skip comma for next note (or we may be at the end)
	if(song[pos] == ',') pos++;

	return pos;
}

// Test for check notes frequency
void Tone_TestNotes(void) {
	uint16_t i=0, j = 2000;
	while(1) {
		Tone_SetDuty(j);
		printf("Tone %d\r", i);
		Tone_SetFreq(notes[i]);
		Delay_ms(1000);

		i++;
		j = j+ 1000;
		if(i>=48) i=0;
	}
}


// This function handles TIMx interrupt request.
void TONE_IRQHandler(void) {
	uint32_t duration;
	uint16_t note;
	uint16_t scale;
	uint16_t freq;

	//Check if TIMx update IRQ is asserted
	if(TIM_GetITStatus(TONE_TIM, TIM_IT_Update) != RESET) {

		// Calculate an execute the next notes if is playing
		if (isPlaying == SET) {

			// Decrease the periods for current note
			if (nPeriods > 0) {
				nPeriods--;

			// If current note duration has been ended
			} else {
				// Check if song has finish
				if (curSong[curPos] == '\0') {
					if (isRepeatMode == SET) {
						// Play another time
						Tone_PlayRTTTL(curSong);
					} else {
						isPlaying = RESET;
						Tone_SetDuty(0);
					}

				// Get next note and play it
				} else {
					// Get the next Note
					curPos = GetNextNote(curSong, curPos, &scale, &note, &duration);

					// Check if is note or pause
					if(note) {
						freq = notes[(scale - 4) * 12 + note];
						Tone_SetFreq(freq);
						Tone_SetDuty(currentDuty);
					} else {
						freq = NOTE_B7; // default freq.
						Tone_SetFreq(freq);
						Tone_SetDuty(0); // silence
					}

					// Calculate time periods with current frequency for generate the correct note duration
					nPeriods = (uint32_t)((float32_t)duration / (float32_t)(1.0f / (float32_t)freq * 1000.0f)*2); // x2 ja que el clock es DIV2
				}

			}

		}

		// We need to clear line pending bit manually
		TIM_ClearITPendingBit(TONE_TIM, TIM_IT_Update);
	}


}

